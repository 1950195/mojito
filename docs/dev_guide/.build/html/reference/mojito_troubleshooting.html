

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
     <title>Troubleshooting</title>
    <link rel="stylesheet" href="_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/print.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '',
        COLLAPSE_INDEX: true,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/theme_extras.js"></script>
   </head> 

     <div class="header"><h1 class="heading"><a href="#">
          <span>Mojito</span></a></h1>
      </div>
      <div class="topnav">
        <p>
        <a class="uplink" href="../">Mojito Documentation</a>
        &#160;&#160;::&#160;&#160;
        <a href="../index.html" title="Mojito">Mojito</a>
        &#160;&#160;::&#160;&#160;
        
           <a href="mojito_cmdline.html">Mojito Command Line</a>
        &#160;&#160;::&#160;&#160;
        
        
           <a href="glossary.html">Glossary</a>
        
        </p>

      </div>
      <div class="content">
   <div class="section" id="troubleshooting">
<h1>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline">¶</a></h1>
<p>The following provide answers to common Mojito problems. See also the
<a class="reference external" href="../faq/">Mojito: FAQ</a>.</p>
<div class="section" id="issues">
<h2>Issues<a class="headerlink" href="#issues" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="#moj-config-error"><em>I am trying get config values using &#8220;ac.config.get(key)&#8221;, but Mojito is giving me
an error or the value is not found.</em></a></li>
<li><a class="reference internal" href="#moj-controller-not-obj"><em>I am getting the message that my mojit controller is not an object? What does this
mean and how do I fix the problem?</em></a></li>
<li><a class="reference internal" href="#moj-asset-insertion"><em>I am including CSS files in the assets object of &#8220;application.json&#8221;, so why are my
CSS files not being inserted into the HTML page?</em></a></li>
<li><a class="reference internal" href="#moj-binder-init"><em>My binder is getting deployed to the client, so why isn&#8217;t the &#8220;init&#8221; function being
called?</em></a></li>
<li><a class="reference internal" href="#handlebars-rendering-error"><em>I am getting Handlebars rendering errors. Is this a client-side or server-side
issue with Handlebars and can it be fixed?</em></a></li>
<li><a class="reference internal" href="#controller-access-yui-modules"><em>Why can&#8217;t my controller access the YUI modules in the &#8220;yui_modules&#8221; directory?</em></a></li>
<li><a class="reference internal" href="#eaddriuse-err"><em>Why am I getting the error message &#8220;EADDRINUSE, Address already in use&#8221; when I try
to start Mojito?</em></a></li>
<li><a class="reference internal" href="#binder-not-executing"><em>When I execute child mojits with &#8220;composite.execute&#8221;, the views are being rendered,
but the binders are not executed. Why?</em></a></li>
<li><a class="reference internal" href="#dom-dependency"><em>Why am I getting a DOM dependency error on the server similar to the one below?
How do I debug this type of error?</em></a></li>
</ul>
</div>
<div class="section" id="solutions">
<h2>Solutions<a class="headerlink" href="#solutions" title="Permalink to this headline">¶</a></h2>
<p id="moj-config-error"><strong>Q:</strong> <em>I am trying get config values using &#8216;ac.config.get(key)&#8217;, but Mojito is giving me
an error or the value is not found.</em></p>
<p><strong>A:</strong>
Try inspecting the <tt class="docutils literal"><span class="pre">spec</span></tt> object that is found in the <tt class="docutils literal"><span class="pre">ActionContext</span></tt> object for the
key. If <tt class="docutils literal"><span class="pre">ac</span></tt> is the <tt class="docutils literal"><span class="pre">ActionContext</span></tt> object, you can access the <tt class="docutils literal"><span class="pre">specs</span></tt> object with the
following: <tt class="docutils literal"><span class="pre">ac.config.getAppConfig().specs</span></tt>.</p>
<p>If you need to examine the entire <tt class="docutils literal"><span class="pre">ActionContext</span></tt> object, you can use the
<tt class="docutils literal"><span class="pre">console.log(ac)</span></tt> or the following code:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">ac</span><span class="p">).</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
   <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">n</span> <span class="o">+</span> <span class="s1">&#39; value:&#39;</span><span class="p">);</span>
   <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">ac</span><span class="p">[</span><span class="nx">n</span><span class="p">]);</span>
<span class="p">});</span>
</pre></div>
</div>
<hr class="docutils" />
<p id="moj-controller-not-obj"><strong>Q:</strong> <em>I am getting the message that my mojit controller is not an object? What does this
mean and how do I fix the problem?</em></p>
<p><strong>A:</strong>
Usually, this error occurs when one of your controllers has a syntax error. Use the
<tt class="docutils literal"><span class="pre">mojito</span></tt> command with the option <tt class="docutils literal"><span class="pre">jslint</span></tt> as seen below to check the app and your
mojits for errors:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">$</span> <span class="nx">mojito</span> <span class="nx">jslint</span> <span class="nx">app</span> <span class="p">{</span><span class="nx">app_name</span><span class="p">}</span>
<span class="nx">$</span> <span class="nx">mojito</span> <span class="nx">jslint</span> <span class="nx">mojit</span> <span class="p">{</span><span class="nx">app_name</span><span class="p">}</span><span class="o">/</span><span class="nx">mojits</span><span class="o">/</span><span class="p">{</span><span class="nx">mojit_name</span><span class="p">}</span>
</pre></div>
</div>
<p>The output from the above commands will tell you if you have errors, but not where the
errors are. Use your own developer tools or manually check your controllers for errors and
then run your application again.</p>
<hr class="docutils" />
<p id="moj-asset-insertion"><strong>Q:</strong> <em>I am including CSS files in the assets object of &#8216;application.json&#8217;, so why are my
CSS files not being inserted into the HTML page?</em></p>
<p><strong>A:</strong>
To configure Mojito to automatically insert the asset files specified in the <tt class="docutils literal"><span class="pre">assets</span></tt>
object of <tt class="docutils literal"><span class="pre">application.json</span></tt>, you must use the <tt class="docutils literal"><span class="pre">HTMLFrameMojit</span></tt>. The <tt class="docutils literal"><span class="pre">HTMLFrameMojit</span></tt>
will insert the assets into the <tt class="docutils literal"><span class="pre">head</span></tt> element if you include the assets in the <tt class="docutils literal"><span class="pre">top</span></tt>
array or at the bottom within the <tt class="docutils literal"><span class="pre">body</span></tt> element if you include the assets in the
<tt class="docutils literal"><span class="pre">bottom</span></tt> array.</p>
<p>In the example <tt class="docutils literal"><span class="pre">application.json</span></tt> below, the <tt class="docutils literal"><span class="pre">index.css</span></tt> file will be included in the
<tt class="docutils literal"><span class="pre">head</span></tt> element of the HTML page. Note that the <tt class="docutils literal"><span class="pre">assets</span></tt> object is inside the <tt class="docutils literal"><span class="pre">frame</span></tt>
mojit instance. which is of type <tt class="docutils literal"><span class="pre">HTMLFrameMojit</span></tt>.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;master&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;specs&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;frame&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;HTMLFrameMojit&quot;</span><span class="p">,</span>
        <span class="s2">&quot;config&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;child&quot;</span> <span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span> <span class="o">:</span> <span class="s2">&quot;framed&quot;</span>
          <span class="p">},</span>
          <span class="s2">&quot;assets&quot;</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;top&quot;</span><span class="o">:</span> <span class="p">{</span>
              <span class="s2">&quot;css&quot;</span><span class="o">:</span> <span class="p">[</span>
                <span class="s2">&quot;/static/framed/assets/index.css&quot;</span>
              <span class="p">]</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<hr class="docutils" />
<p id="moj-binder-init"><strong>Q:</strong> <em>My binder is getting deployed to the client, so why isn&#8217;t the &#8220;init&#8221; function
being called?</em></p>
<p><strong>A:</strong>
Most likely Mojito was not able to create a <tt class="docutils literal"><span class="pre">Y.one</span></tt> instance to wrap the DOM nodes that
wrap mojit instances because the root element of the mojit&#8217;s template didn&#8217;t have the
<tt class="docutils literal"><span class="pre">id</span></tt> value <tt class="docutils literal"><span class="pre">{{mojit_view_id}}</span></tt>. If your template wraps its content in a <tt class="docutils literal"><span class="pre">&lt;div&gt;</span></tt>
element, assign the value  <tt class="docutils literal"><span class="pre">{{mojit_view_id}}</span></tt> to the <tt class="docutils literal"><span class="pre">id</span></tt> attribute of that <tt class="docutils literal"><span class="pre">&lt;div&gt;</span></tt></p>
<blockquote>
<div>element: <tt class="docutils literal"><span class="pre">&lt;div</span> <span class="pre">id={{mojit_view_id}}&gt;</span></tt></div></blockquote>
<hr class="docutils" />
<p id="handlebars-rendering-error"><strong>Q:</strong> <em>I am getting Handlebars rendering errors. Is this a client-side or server-side
issue with Handlebars and can it be fixed?</em></p>
<p><strong>A:</strong>
The issue is not with Handlebars on the client, but with the Handlebars rendering engine
on the server. The Handlebars rendering engine inspects the prototypes during the template
processing stage. If you remove the prototype inspecting, e.g., creating object literals,
the Handlebars engine cannot process the data for the templates.</p>
<p>Although not a permanent solution, you can use <tt class="docutils literal"><span class="pre">Y.mix</span></tt> to ensure that your data has a
prototype so that your templates can be rendered. Try doing the following:
<tt class="docutils literal"><span class="pre">ac.done(Y.mix({},data));</span></tt></p>
<hr class="docutils" />
<p id="controller-access-yui-modules"><strong>Q:</strong> <em>Why can&#8217;t my controller access the YUI modules in the &#8220;yui_modules&#8221; directory?</em></p>
<p><strong>A:</strong>
A common problem is that the YUI module is missing the
<a class="reference external" href="../reference/glossary.html#affinity">affinity</a> or that the affinity is incorrect. If
your controller has been deployed to the client, your YUI module should have the
<tt class="docutils literal"><span class="pre">client</span></tt> or <tt class="docutils literal"><span class="pre">common</span></tt> affinity. If your controller is running on the server, the YUI
module should have the affinity <tt class="docutils literal"><span class="pre">server</span></tt> or <tt class="docutils literal"><span class="pre">common</span></tt>. Also, confirm that the
registered name of the YUI module, i.e., the string passed to <tt class="docutils literal"><span class="pre">YUI.add</span></tt>, is the same as
the string passed to the <tt class="docutils literal"><span class="pre">requires</span></tt> array.</p>
<hr class="docutils" />
<p id="eaddriuse-err"><strong>Q:</strong> <em>Why am I getting the error message &#8220;EADDRINUSE, Address already in use&#8221; when I try
to start Mojito?</em></p>
<p><strong>A:</strong>
You probably have an instance of mojito already started/running (check the output from
<tt class="docutils literal"><span class="pre">ps</span> <span class="pre">aux</span> <span class="pre">|</span> <span class="pre">grep</span> <span class="pre">mojito</span></tt>). Either stop the instance that is running or start a new
instance on another port such as in <tt class="docutils literal"><span class="pre">mojito</span> <span class="pre">start</span> <span class="pre">8667</span></tt>.</p>
<hr class="docutils" />
<p id="binder-not-executing"><strong>Q:</strong> <em>When I execute child mojits with &#8220;composite.execute&#8221;, the views are being
rendered, but the binders are not executed. Why?</em></p>
<p><strong>A:</strong>
The problem may be that you need to pass the &#8220;meta&#8221; information to your children as well.
This is where the binder metadata <em>bubbles up</em> from the children.</p>
<p>Try doing the following:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">...</span>
  <span class="nx">ac</span><span class="p">.</span><span class="nx">composite</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="nx">cfg</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">meta</span><span class="p">){</span>
    <span class="nx">ac</span><span class="p">.</span><span class="nx">done</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">meta</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">...</span>
</pre></div>
</div>
<dl class="docutils" id="dom-dependency">
<dt><strong>Q:</strong> <a href="#id1"><span class="problematic" id="id2">*</span></a>Why am I getting a DOM dependency error on the server similar to the one below?</dt>
<dd>How do I debug this type of error?*</dd>
</dl>
<div class="highlight-javascript"><pre>TypeError: Cannot read property 'documentElement' of null at Object.YUI.add.requires [as fn]

(/home/user1/my_app/node_modules/mojito/node_modules/yui/dom-base/dom-base-min.js:7:50)

at proto._attach

(/home/user1/my_app/node_modules/mojito/node_modules/yui/yui-nodejs/yui-nodejs.js:701:33)</pre>
</div>
<p><strong>A:</strong>
Your application has modules that depend on DOM APIs that aren&#8217;t available in
a Node.js-environment. To find those modules, try using the commands
<tt class="docutils literal"><span class="pre">mojito</span> <span class="pre">gv</span> <span class="pre">--trace</span> <span class="pre">dom</span></tt> and <tt class="docutils literal"><span class="pre">mojito</span> <span class="pre">gv</span> <span class="pre">--trace</span> <span class="pre">dom-base</span></tt>, which
create a graph of the module dependencies.</p>
</div>
</div>

   </div>

