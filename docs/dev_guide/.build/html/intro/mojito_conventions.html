

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
     <title>Mojito Conventions</title>
    <link rel="stylesheet" href="_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/print.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '',
        COLLAPSE_INDEX: true,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/theme_extras.js"></script>
   </head> 

     <div class="header"><h1 class="heading"><a href="#">
          <span>Mojito</span></a></h1>
      </div>
      <div class="topnav">
        <p>
        <a class="uplink" href="../">Mojito Documentation</a>
        &#160;&#160;::&#160;&#160;
        <a href="../index.html" title="Mojito">Mojito</a>
        &#160;&#160;::&#160;&#160;
        
        
        </p>

      </div>
      <div class="content">
   <div class="section" id="mojito-conventions">
<h1>Mojito Conventions<a class="headerlink" href="#mojito-conventions" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<span id="mojito-conventions-overview"></span><h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>This chapter is provides an overview of the general conventions and practices when
developing Mojito applications. Think of this chapter as a guideline or a cheat sheet
to help you remember Mojito-specific conventions. If you don&#8217;t find the information
that you&#8217;re looking for here, see the chapter dedicated to the topic you&#8217;re interested in,
such as <a class="reference external" href="mojito_mojits.html">Mojits</a> or <a class="reference external" href="mojito_configuring.html">Configuring Mojito</a>.</p>
<div class="figure align-left">
<a class="reference internal image-reference" href="../_images/mojito_app_structure_exec_flow.jpg"><img alt="Mojito Application Structure and Execution Flow" src="../_images/mojito_app_structure_exec_flow.jpg" style="width: 850.0px; height: 1082.0px;" /></a>
<p class="caption">The diagram below shows you the structure of a Mojito application, the differences between
a mojit definition and instance, and how a routing path is mapped to a mojit action to
render a template:</p>
</div>
<div class="section" id="mvc-structure">
<span id="conventions-overview-mvc"></span><h3>MVC Structure<a class="headerlink" href="#mvc-structure" title="Permalink to this headline">¶</a></h3>
<p>Your models, controllers, and views in Mojito applications are in your mojit directories
in the following location:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">mojits/{mojit_name}/models/</span></tt></li>
<li><tt class="docutils literal"><span class="pre">mojits/{mojit_name}/</span></tt></li>
<li><tt class="docutils literal"><span class="pre">mojits/{mojit_name}/views/</span></tt></li>
</ul>
</div>
<div class="section" id="configuration">
<span id="conventions-overview-config"></span><h3>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h3>
<p>Configurations are found in either the <tt class="docutils literal"><span class="pre">.json</span></tt> or <tt class="docutils literal"><span class="pre">.yaml</span></tt> files in the application
directory or under mojit directories. The configurations are composed of JSON or YAML, which
is a superset of JSON. If both JSON and YAML versions of a configuration file exist, Mojito
will use the configurations defined in the YAML file.</p>
<div class="section" id="application">
<span id="conventions-config-app"></span><h4>Application<a class="headerlink" href="#application" title="Permalink to this headline">¶</a></h4>
<p>The configurations files found directly under the application directory are considered
application-level or shared configurations that all mojits can access.  The application
configuration files are <tt class="docutils literal"><span class="pre">application.json</span></tt> and <tt class="docutils literal"><span class="pre">routes.json</span></tt> or the YAML versions
<tt class="docutils literal"><span class="pre">application.yaml</span></tt> and <tt class="docutils literal"><span class="pre">routes.yaml</span></tt>.</p>
<p>The <tt class="docutils literal"><span class="pre">application.json</span></tt> file stores general configuration for the application as well
as defines mojit instance configurations, which are covered in the
<a class="reference internal" href="#mojito-conventions-mojits"><em>Mojits</em></a> section. The <tt class="docutils literal"><span class="pre">routes.json</span></tt> file is for
configuring routing paths so that a path is mapped to the execution of a mojit action.</p>
<p>We&#8217;re only going to cover the use of contexts, suggested settings for development
and production, and routing. See <a class="reference external" href="mojito_configuring.html">Configuring Mojito</a> for
descriptions and possible values for all the configurations as well as examples for
configuring routing and more.</p>
<div class="section" id="contexts">
<span id="conventions-app-config-context"></span><h5>Contexts<a class="headerlink" href="#contexts" title="Permalink to this headline">¶</a></h5>
<p>The application configuration file <tt class="docutils literal"><span class="pre">application.json</span></tt> allows you to map configurations
to different runtime environments. The contexts are defined in the configuration
object by the <tt class="docutils literal"><span class="pre">setting</span></tt> property. In the example snippet below, different mojit instances
are created for the developer and production environments:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
  <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;environment:development&quot;</span> <span class="p">],</span>
  <span class="s2">&quot;specs&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;test&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;TestMojit&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">},</span>
<span class="p">{</span>
  <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;environment:production&quot;</span> <span class="p">],</span>
  <span class="s2">&quot;specs&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;test&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;ProductionMojit&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">},</span>
</pre></div>
</div>
</div>
<div class="section" id="development-production-configurations">
<span id="conventions-app-config-dev-prod"></span><h5>Development/Production Configurations<a class="headerlink" href="#development-production-configurations" title="Permalink to this headline">¶</a></h5>
<p>We recommend that you add special logging and cache configurations for the
<tt class="docutils literal"><span class="pre">environment:development</span></tt>, so that all log messages are displayed and assets
are not cached. The <tt class="docutils literal"><span class="pre">environment:production</span></tt> context, in contrast, does not
show any error messages and allows caching.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
  <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;environment:development&quot;</span> <span class="p">],</span>
  <span class="s2">&quot;staticHandling&quot;</span><span class="o">:</span> <span class="p">{</span>
     <span class="s2">&quot;forceUpdate&quot;</span><span class="o">:</span> <span class="kc">true</span>
  <span class="p">},</span>
  <span class="s2">&quot;yui&quot;</span><span class="o">:</span><span class="p">{</span>
    <span class="s2">&quot;config&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;debug&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="s2">&quot;logLevel&quot;</span><span class="o">:</span> <span class="s2">&quot;debug&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">},</span>
<span class="p">{</span>
  <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;environment:production&quot;</span> <span class="p">],</span>
  <span class="s2">&quot;staticHandling&quot;</span><span class="o">:</span> <span class="p">{</span>
     <span class="s2">&quot;forceUpdate&quot;</span><span class="o">:</span> <span class="kc">false</span>
  <span class="p">},</span>
  <span class="s2">&quot;yui&quot;</span><span class="o">:</span><span class="p">{</span>
    <span class="s2">&quot;config&quot;</span><span class="o">:</span> <span class="p">{</span>
         <span class="s2">&quot;debug&quot;</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
         <span class="s2">&quot;logLevel&quot;</span><span class="o">:</span> <span class="s2">&quot;none&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">},</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="routing">
<span id="conventions-config-routing"></span><h4>Routing<a class="headerlink" href="#routing" title="Permalink to this headline">¶</a></h4>
<p>The names of routing paths should be short, descriptive, and in lowercase. The routes
are defined by an object that associates a path with an action of a mojit instance.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="s2">&quot;root&quot;</span><span class="o">:</span> <span class="p">{</span>
  <span class="s2">&quot;path&quot;</span><span class="o">:</span> <span class="s2">&quot;/&quot;</span><span class="p">,</span>
  <span class="s2">&quot;call&quot;</span><span class="o">:</span> <span class="s2">&quot;frame.index&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="modules">
<span id="conventions-modules"></span><h3>Modules<a class="headerlink" href="#modules" title="Permalink to this headline">¶</a></h3>
<p>Mojito code is organized into files that are custom YUI modules. In the YUI module,
you use <tt class="docutils literal"><span class="pre">YUI.add</span></tt> to register a string as the name of the custom YUI modules. See
the <a class="reference internal" href="#mojito-conventions-mojits"><em>Mojits section</em></a> for more module information for
controllers, models, binders, and tests.</p>
</div>
<div class="section" id="tests">
<span id="conventions-tests"></span><h3>Tests<a class="headerlink" href="#tests" title="Permalink to this headline">¶</a></h3>
<div class="section" id="unit">
<span id="conventions-tests-unit"></span><h4>Unit<a class="headerlink" href="#unit" title="Permalink to this headline">¶</a></h4>
<p>Unit tests are located in the mojits and are run with the Mojito command-line utility.
Mojito allows you to write server-side unit tests for the controller and model.
See the <em class="xref std std-ref">Mojits: Tests</em> below for more information.</p>
</div>
<div class="section" id="functional">
<span id="conventions-tests-func"></span><h4>Functional<a class="headerlink" href="#functional" title="Permalink to this headline">¶</a></h4>
<p>Mojito does not come with a functional testing suite, but we suggest that you use
the npm module Arrow for writing and running functional tests. Arrow is a testing framework
that fuses together JavaScript, Node.js, PhantomJS, and Selenium.</p>
<p>Mojito does not have any formal conventions for using Arrow. We recommend
that you read the <a class="reference external" href="https://github.com/yahoo/arrow/tree/master/docs">Arrow documentation</a>
and the wiki <a class="reference external" href="https://github.com/yahoo/mojito/wiki/Mojito-Framework's-Unit-and-Functional-Tests">Mojito Framework&#8217;s Unit and Functional Tests</a>
for examples.</p>
</div>
</div>
</div>
<div class="section" id="mojito-conventions-mojits">
<span id="id2"></span><h2>Mojits<a class="headerlink" href="#mojito-conventions-mojits" title="Permalink to this headline">¶</a></h2>
<div class="section" id="mojit-instances">
<span id="conventions-mojits-instances"></span><h3>Mojit Instances<a class="headerlink" href="#mojit-instances" title="Permalink to this headline">¶</a></h3>
<p>The instance is defined in the application configuration file <tt class="docutils literal"><span class="pre">application.json</span></tt>
and then created by Mojito when the application is started. The naming convention of
mojit instances is to use a lower-case string, much as you would use a lower-case
string to name an object in JavaScript.</p>
<div class="section" id="conventions-instances-config">
<span id="id3"></span><h4>Configuration<a class="headerlink" href="#conventions-instances-config" title="Permalink to this headline">¶</a></h4>
<p>Mojits have instance configuration, default configuration, and definition files.
The instance configuration is specified in the <tt class="docutils literal"><span class="pre">config</span></tt> object of the mojit instance
in <tt class="docutils literal"><span class="pre">application.json</span></tt> and is generally information that is important to the execution
of mojit instance. The default configuration is found in <tt class="docutils literal"><span class="pre">defaults.json</span></tt> in the mojit
directory and is used to store default instance configuration values in the <tt class="docutils literal"><span class="pre">config</span></tt>
object. For general data, mojits should use the <tt class="docutils literal"><span class="pre">definition.json</span></tt> file to store key-value
pairs not used to determine what action is executed or template is rendered.</p>
</div>
</div>
<div class="section" id="mojit-definitions">
<span id="conventions-mojits-definitions"></span><h3>Mojit Definitions<a class="headerlink" href="#mojit-definitions" title="Permalink to this headline">¶</a></h3>
<p>Mojit definitions are the files and code that constitute the mojit and are
created with the command <tt class="docutils literal"><span class="pre">mojito</span> <span class="pre">create</span> <span class="pre">mojit</span> <span class="pre">&lt;mojit_name&gt;</span></tt>.</p>
<div class="section" id="location">
<span id="conventions-mojits-definitions-location"></span><h4>Location<a class="headerlink" href="#location" title="Permalink to this headline">¶</a></h4>
<p>The default location for mojits is in <tt class="docutils literal"><span class="pre">{application_name}/mojits</span></tt>, but you can specify
the location of mojits with the application configurations <tt class="docutils literal"><span class="pre">mojitDirs</span></tt> and <tt class="docutils literal"><span class="pre">mojitsDirs</span></tt>.</p>
</div>
<div class="section" id="naming">
<span id="conventions-mojits-definitions-naming"></span><h4>Naming<a class="headerlink" href="#naming" title="Permalink to this headline">¶</a></h4>
<p>The naming convention for mojit definitions is to use an upper camel-case string and keep
the name as short as possible, such as <tt class="docutils literal"><span class="pre">Flickr</span></tt> or <tt class="docutils literal"><span class="pre">FlickrPhotos</span></tt>. Think of the mojit
definition as a class name and the instance as an instantiation of the mojit.</p>
</div>
<div class="section" id="controllers">
<span id="conventions-mojits-def-controllers"></span><h4>Controllers<a class="headerlink" href="#controllers" title="Permalink to this headline">¶</a></h4>
<div class="section" id="pathname">
<span id="mojits-def-controllers-pathname"></span><h5>Pathname<a class="headerlink" href="#pathname" title="Permalink to this headline">¶</a></h5>
<p><tt class="docutils literal"><span class="pre">mojits/{mojit_name}/controller.{affinity}.{selector}.js</span></tt></p>
<p>For the file name of the controller shown above, the <tt class="docutils literal"><span class="pre">{affinity}</span></tt> can be
<tt class="docutils literal"><span class="pre">server</span></tt>, <tt class="docutils literal"><span class="pre">common</span></tt>, or <tt class="docutils literal"><span class="pre">client</span></tt>, and <tt class="docutils literal"><span class="pre">{selector}</span></tt>
can either be omitted or defined by the <tt class="docutils literal"><span class="pre">selector</span></tt> property in <tt class="docutils literal"><span class="pre">application.json</span></tt>.</p>
<p>The default controller file is <tt class="docutils literal"><span class="pre">controller.server.js</span></tt>, but you can use the affinity
to determining where the controller will be executed and define different
versions of the controller with the <tt class="docutils literal"><span class="pre">selector</span></tt> property in <tt class="docutils literal"><span class="pre">application.json</span></tt>.</p>
</div>
<div class="section" id="yui-module-names">
<span id="mojits-def-controllers-modules"></span><h5>YUI Module Names<a class="headerlink" href="#yui-module-names" title="Permalink to this headline">¶</a></h5>
<p>The convention is for mojit controllers to register the mojit definition name as the
module name. For example, the mojit <tt class="docutils literal"><span class="pre">Flickr</span></tt> would register the module name
<tt class="docutils literal"><span class="pre">Flickr</span></tt> with <tt class="docutils literal"><span class="pre">YUI.add</span></tt>: <tt class="docutils literal"><span class="pre">YUI.add('Flickr',</span> <span class="pre">function(Y,</span> <span class="pre">NAME)</span> <span class="pre">{</span></tt></p>
</div>
</div>
<div class="section" id="models">
<span id="conventions-mojits-def-models"></span><h4>Models<a class="headerlink" href="#models" title="Permalink to this headline">¶</a></h4>
<div class="section" id="mojits-def-models-location">
<span id="id4"></span><h5>Pathname<a class="headerlink" href="#mojits-def-models-location" title="Permalink to this headline">¶</a></h5>
<p><tt class="docutils literal"><span class="pre">mojits/{mojit_name}/models/{model_name}.{affinity}.js</span></tt></p>
<p>In the model file name shown above, <tt class="docutils literal"><span class="pre">{model_name}</span></tt> is a
user-defined string:</p>
</div>
<div class="section" id="mojits-def-models-module-naming">
<span id="id5"></span><h5>YUI Module Names<a class="headerlink" href="#mojits-def-models-module-naming" title="Permalink to this headline">¶</a></h5>
<p>The naming of modules for mojit models has the following convention but is much looser in
its application: <tt class="docutils literal"><span class="pre">{mojit_name}Model</span></tt></p>
</div>
<div class="section" id="using-models">
<span id="mojits-def-models-using"></span><h5>Using Models<a class="headerlink" href="#using-models" title="Permalink to this headline">¶</a></h5>
<p>To require Model modules in the controller, you use the <tt class="docutils literal"><span class="pre">get</span></tt> method of the
<tt class="docutils literal"><span class="pre">Models</span></tt> addon. You pass the registered module name to the <tt class="docutils literal"><span class="pre">get</span></tt> method as shown
in this example:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">...</span>
  <span class="p">...</span>
    <span class="nx">index</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ac</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">ac</span><span class="p">.</span><span class="nx">models</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;FlickrModel&#39;</span><span class="p">).</span><span class="nx">getData</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
        <span class="p">...</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">...</span>
<span class="p">},</span> <span class="s1">&#39;0.0.1&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">requires</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;mojito&#39;</span><span class="p">,</span> <span class="s1">&#39;mojito-models-addon&#39;</span><span class="p">]});</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="templates-views">
<span id="conventions-mojits-def-templates"></span><h4>Templates (Views)<a class="headerlink" href="#templates-views" title="Permalink to this headline">¶</a></h4>
<div class="section" id="mojits-def-templates-location">
<span id="id6"></span><h5>Pathname<a class="headerlink" href="#mojits-def-templates-location" title="Permalink to this headline">¶</a></h5>
<p><tt class="docutils literal"><span class="pre">mojits/{mojit_name}/views/{action}.{selector}.{view_engine}.html</span></tt></p>
<p>The default template file when you create a Mojito application is <tt class="docutils literal"><span class="pre">index.hb.html</span></tt>.
In the template file shown above, <tt class="docutils literal"><span class="pre">{action}</span></tt> is the
controller function being called or view specified, <tt class="docutils literal"><span class="pre">{selector}</span></tt> is defined by the
<tt class="docutils literal"><span class="pre">{selector}</span></tt> property in <tt class="docutils literal"><span class="pre">application.json</span></tt>, and <tt class="docutils literal"><span class="pre">{view_engine}</span></tt> being <tt class="docutils literal"><span class="pre">hb</span></tt> for
Handlebars by default or any view engine implemented by the application developer.</p>
</div>
</div>
<div class="section" id="binders">
<span id="conventions-mojits-def-binders"></span><h4>Binders<a class="headerlink" href="#binders" title="Permalink to this headline">¶</a></h4>
<div class="section" id="mojits-def-binders-location">
<span id="id7"></span><h5>Pathname<a class="headerlink" href="#mojits-def-binders-location" title="Permalink to this headline">¶</a></h5>
<p><tt class="docutils literal"><span class="pre">mojits/{mojit_name}/binders/{action}.js</span></tt></p>
<p>In the binder file shown above, <tt class="docutils literal"><span class="pre">{action}</span></tt> is the
controller action mapped to the request URL.</p>
<p>When you use a frame mojit, such as <tt class="docutils literal"><span class="pre">HTMLFrameMojit</span></tt>, and configure your application to
deploy code to the client by setting the application configuration <tt class="docutils literal"><span class="pre">deploy</span></tt> to <tt class="docutils literal"><span class="pre">true</span></tt>,
Mojito will send the binder file  with the response body.</p>
</div>
<div class="section" id="mojits-def-binders-module-names">
<span id="id8"></span><h5>YUI Module Names<a class="headerlink" href="#mojits-def-binders-module-names" title="Permalink to this headline">¶</a></h5>
<p>The naming of modules for mojit binders has the following convention:
<tt class="docutils literal"><span class="pre">{mojit_name}Binder{Action}</span></tt></p>
</div>
</div>
</div>
<div class="section" id="conventions-mojits-tests">
<span id="id9"></span><h3>Tests<a class="headerlink" href="#conventions-mojits-tests" title="Permalink to this headline">¶</a></h3>
<div class="section" id="mojits-tests-location">
<span id="id10"></span><h4>Pathname<a class="headerlink" href="#mojits-tests-location" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">mojits/{mojit_name}/tests/controller.server-tests.js</span></tt></li>
<li><tt class="docutils literal"><span class="pre">mojits/{mojit_name}/tests/models/{model_name}.{affinity}-tests.js</span></tt></li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Mojito will run any JavaScript tests in the <tt class="docutils literal"><span class="pre">tests</span></tt> directory, but we suggest
you use the naming convention shown above.</p>
</div>
</div>
</div>
</div>
<div class="section" id="yui-modules">
<span id="mojito-conventions-yui-modules"></span><h2>YUI Modules<a class="headerlink" href="#yui-modules" title="Permalink to this headline">¶</a></h2>
<p>This section is for custom YUI modules that developers want to include in the application code.
See also <a class="reference external" href="../topics/mojito_yui_config.html">Configuring YUI in Mojito</a>.</p>
<div class="section" id="conventions-yui-modules-location">
<span id="id11"></span><h3>Pathname<a class="headerlink" href="#conventions-yui-modules-location" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">{application_name}/yui_modules/{module_name}.{affinity}.js</span></tt></p>
</div>
<div class="section" id="using-the-yui-modules">
<span id="conventions-yui-modules-yui-modules"></span><h3>Using the YUI Modules<a class="headerlink" href="#using-the-yui-modules" title="Permalink to this headline">¶</a></h3>
<p>The YUI module that you created registers the YUI module name with <tt class="docutils literal"><span class="pre">YUI.add</span></tt>.
In your mojit code (controllers, binders, models), you specify the module name
as a dependency in the <tt class="docutils literal"><span class="pre">requires</span></tt> array. Your mojit code can then access the
YUI module through the <tt class="docutils literal"><span class="pre">Y</span></tt> instance.</p>
<p>For example, suppose the YUI module <tt class="docutils literal"><span class="pre">string-helper</span></tt> is registered in the file
<tt class="docutils literal"><span class="pre">string_helper.server.js</span></tt> as shown below:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">YUI</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;string-helper&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">Y</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Code goes here.</span>
  <span class="p">...</span>

  <span class="c1">// Add dependencies for your module in the `requires` array.</span>
<span class="p">},</span> <span class="s1">&#39;1.0.0&#39;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">requires</span><span class="o">:</span> <span class="p">[]});</span>
</pre></div>
</div>
<p>Your controller could then access the module by requiring it. The example
below shows how you would require our <tt class="docutils literal"><span class="pre">string-helper</span></tt> module and provides
a possible example of using the helper:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">YUI</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;Body&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">Y</span><span class="p">,</span> <span class="nx">NAME</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">Y</span><span class="p">.</span><span class="nx">namespace</span><span class="p">(</span><span class="s1">&#39;mojito.binders&#39;</span><span class="p">)[</span><span class="nx">NAME</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>

    <span class="nx">index</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">ac</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">str_helper</span> <span class="o">=</span> <span class="nx">Y</span><span class="p">.</span><span class="nx">StringHelper</span><span class="p">();</span>
        <span class="nx">Y</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">str_helper</span><span class="p">.</span><span class="nx">strip</span><span class="p">(</span><span class="s2">&quot; this is just a hypothetical example &quot;</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">},</span> <span class="s1">&#39;1.0.0&#39;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">requires</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;mojito-models-addon&#39;</span><span class="p">,</span> <span class="s1">&#39;string-helper&#39;</span><span class="p">]});</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="addons">
<span id="mojito-conventions-addons"></span><h2>Addons<a class="headerlink" href="#addons" title="Permalink to this headline">¶</a></h2>
<p>Addons are  extensions that provide functionality that lives both on the server
and/or client. Each addon provides additional functions through a namespace that is
attached directly to the <tt class="docutils literal"><span class="pre">ActionContext</span></tt> object and is available when required in a
controller.</p>
<div class="section" id="built-in-addons">
<span id="conventions-addons-builtin"></span><h3>Built-In Addons<a class="headerlink" href="#built-in-addons" title="Permalink to this headline">¶</a></h3>
<p>Mojito comes with built-in addons that are accessible through the <tt class="docutils literal"><span class="pre">ActionContext</span></tt>
object. To access a built-in addon from a controller, you add the string
<tt class="docutils literal"><span class="pre">mojito-{addon}-addon</span></tt> to the <tt class="docutils literal"><span class="pre">requires</span></tt> array, where <tt class="docutils literal"><span class="pre">{addon}</span></tt>
could be any of the following:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">assets</span></tt> - <tt class="docutils literal"><span class="pre">Assets</span></tt> addon for managing assets</li>
<li><tt class="docutils literal"><span class="pre">config</span></tt> - <tt class="docutils literal"><span class="pre">Config</span></tt> addon for handling configurations</li>
<li><tt class="docutils literal"><span class="pre">composite</span></tt> - <tt class="docutils literal"><span class="pre">Composite</span></tt> addon to execute child mojits</li>
<li><tt class="docutils literal"><span class="pre">cookies</span></tt> - <tt class="docutils literal"><span class="pre">Cookie</span></tt> addon for getting/setting cookies</li>
<li><tt class="docutils literal"><span class="pre">data</span></tt> - <tt class="docutils literal"><span class="pre">Data</span></tt> addon for sharing data</li>
<li><tt class="docutils literal"><span class="pre">helpers</span></tt> - <tt class="docutils literal"><span class="pre">Helpers</span></tt> addon for registering Handlebars helpers</li>
<li><tt class="docutils literal"><span class="pre">http</span></tt> - <tt class="docutils literal"><span class="pre">Http</span></tt> addon for getting and setting HTTP headers, request information.</li>
<li><tt class="docutils literal"><span class="pre">intl</span></tt> - <tt class="docutils literal"><span class="pre">Intl</span></tt> addon for localization</li>
<li><tt class="docutils literal"><span class="pre">meta</span></tt> - <tt class="docutils literal"><span class="pre">Meta</span></tt> addon for getting and merging meta data of child mojits.</li>
<li><tt class="docutils literal"><span class="pre">models</span></tt> - <tt class="docutils literal"><span class="pre">Models</span></tt> addon for accessing models</li>
<li><tt class="docutils literal"><span class="pre">params</span></tt> - <tt class="docutils literal"><span class="pre">Params</span></tt> addon for managing parameters</li>
<li><tt class="docutils literal"><span class="pre">partial</span></tt> - <tt class="docutils literal"><span class="pre">Partials</span></tt> addon for rendering partials.</li>
<li><tt class="docutils literal"><span class="pre">url</span></tt> - <tt class="docutils literal"><span class="pre">Url</span></tt> addon for creating and finding URLs.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The list of built-in <tt class="docutils literal"><span class="pre">ActionContext</span></tt> addons above is not complete. Mojito also
has <strong>Resource Store</strong> (<tt class="docutils literal"><span class="pre">rs</span></tt>) and <strong>View Engine</strong> (<tt class="docutils literal"><span class="pre">view-engine</span></tt>) addons.
See the <a class="reference external" href="https://github.com/yahoo/mojito/tree/develop/lib/app/addons">addons</a>
directory in the Mojito source code and the <a class="reference external" href="http://developer.yahoo.com/cocktails/mojito/api/">Mojito API</a>
documentation for more information.</p>
</div>
</div>
<div class="section" id="custom-addons">
<span id="conventions-addons-custom"></span><h3>Custom Addons<a class="headerlink" href="#custom-addons" title="Permalink to this headline">¶</a></h3>
<p>You can also create your own addons that you can include in controllers and then
access through the <tt class="docutils literal"><span class="pre">ActionContext</span></tt> object just like the built-in addons.</p>
<div class="section" id="addons-custom-location">
<span id="id13"></span><h4>Pathname<a class="headerlink" href="#addons-custom-location" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">{app_dir}/addons/ac/{addon_namespace}.{affinity}.js</span></tt></li>
<li><tt class="docutils literal"><span class="pre">{mojit_dir}/addons/ac/{addon_namespace}.{affinity}.js</span></tt></li>
</ul>
<p>For the addon files shown above, <tt class="docutils literal"><span class="pre">{addon_namespace}</span></tt>
is the string appended to the namespace defined in the addon, such as
<tt class="docutils literal"><span class="pre">Y.namespace.addons.ac.{addon_namespace}</span></tt>.</p>
</div>
<div class="section" id="module-names">
<span id="id14"></span><h4>Module Names<a class="headerlink" href="#module-names" title="Permalink to this headline">¶</a></h4>
<p>The naming convention for modules for custom addons is the following,
where <tt class="docutils literal"><span class="pre">{addon_namespace}</span></tt> is the string appended to the namespace defined in the
addon, such as <tt class="docutils literal"><span class="pre">Y.namespace.addons.ac.{addon_namespace}</span></tt>.</p>
<p><tt class="docutils literal"><span class="pre">addon-ac-{addon_namespace}</span></tt></p>
</div>
<div class="section" id="accessing-addons">
<span id="conventions-addons-accessing"></span><h4>Accessing Addons<a class="headerlink" href="#accessing-addons" title="Permalink to this headline">¶</a></h4>
<p>To use an addon, you require the registered addon name in the
<tt class="docutils literal"><span class="pre">requires</span></tt> array of your controller.</p>
</div>
</div>
<div class="section" id="id15">
<span id="id16"></span><h3>Tests<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h3>
<p>The module names for both controller and model unit tests using the following naming
convention:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">{mojit_name}-tests</span></tt> - (controller unit tests)</li>
<li><tt class="docutils literal"><span class="pre">{mojit_name}Model-tests</span></tt> - (model unit tests)</li>
</ul>
</div>
</div>
<div class="section" id="static-assets">
<span id="mojito-conventions-static-assets"></span><h2>Static Assets<a class="headerlink" href="#static-assets" title="Permalink to this headline">¶</a></h2>
<p>Assets are resources that are required on the clients. These resources are primarily
CSS but can also be JavaScript that is ancillary to and not a core component of the Mojito
application.</p>
<p>The suggested method for including CSS and JS assets in applications is to include the
in the <tt class="docutils literal"><span class="pre">assets</span></tt> directory, specify the path to the assets in the <tt class="docutils literal"><span class="pre">assets</span></tt>
property of <tt class="docutils literal"><span class="pre">application.json</span></tt>, and then have the <tt class="docutils literal"><span class="pre">HTMLFrameMojit</span></tt> attach the assets
to the HTML skeleton. You can also just hard-code the path to the assets in your templates,
but this is not the recommended approach.</p>
<div class="section" id="conventions-assets-location">
<span id="id17"></span><h3>Location<a class="headerlink" href="#conventions-assets-location" title="Permalink to this headline">¶</a></h3>
<p>For application-level (or shared) assets, the recommended location
would be the following directories:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">{application_name}/assets/css/</span></tt></li>
<li><tt class="docutils literal"><span class="pre">{application_name}/assets/js/</span></tt></li>
</ul>
<p>For mojit-level assets, the recommended location is the following:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">{mojit_name}/assets/css/</span></tt></li>
<li><tt class="docutils literal"><span class="pre">{mojit_name}/assets/js/</span></tt></li>
</ul>
</div>
<div class="section" id="conventions-assets-path">
<span id="id18"></span><h3>Pathname<a class="headerlink" href="#conventions-assets-path" title="Permalink to this headline">¶</a></h3>
<p>Mojito registers a path to the assets based on a prefix, a source path, and
the relative path to the assets. The <em>prefix</em> is the basename directory of
the static URL. The default value for the prefix is <tt class="docutils literal"><span class="pre">/static/</span></tt>,
but you can define the prefix with the <tt class="docutils literal"><span class="pre">staticHandling.prefix</span></tt> property in <tt class="docutils literal"><span class="pre">application.json</span></tt>.</p>
<p>The <em>source path</em> for assets would either be the application or the mojit depending on the
level of the resource. The <em>relative path</em> is the path relative to the source path, which
in the case of assets would be either <tt class="docutils literal"><span class="pre">/assets/css/</span></tt> or <tt class="docutils literal"><span class="pre">/assets/js/</span></tt>.</p>
<p>Thus, the default path to assets would have the following syntax: <tt class="docutils literal"><span class="pre">/{prefix}/{source_path}/{relative_path}</span></tt>
For example, the default path to the application-level CSS asset <tt class="docutils literal"><span class="pre">index.css</span></tt> for the
application <tt class="docutils literal"><span class="pre">NewsAggregator</span></tt> would be <tt class="docutils literal"><span class="pre">/static/NewsAggregator/assets/css/index.css</span></tt>.</p>
</div>
<div class="section" id="using-static-assets">
<h3>Using Static Assets<a class="headerlink" href="#using-static-assets" title="Permalink to this headline">¶</a></h3>
<p>There are three main ways to use static assets in your application:</p>
<ul class="simple">
<li>Specify the asset paths in <tt class="docutils literal"><span class="pre">application.json</span></tt> for the <cite>HTMLFrameMojit`</cite> to attach to
the page. See <a class="reference external" href="../code_exs/framed_assets.html">Code Examples: Attaching Assets with HTMLFrameMojit</a>.</li>
<li>Hardcode the static path to the assets in your template. See <a class="reference external" href="../code_exs/adding_assets.html">Code Examples: Adding Assets</a></li>
<li>Dynamically attach the assets with the <tt class="docutils literal"><span class="pre">Assets</span></tt> addon. See <a class="reference external" href="../topics/mojito_assets.html#using-the-assets-addon">Using the Assets Addon</a>.</li>
</ul>
</div>
</div>
</div>

   </div>

