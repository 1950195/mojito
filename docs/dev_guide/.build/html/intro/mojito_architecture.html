

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
     <title>Mojito Architecture</title>
    <link rel="stylesheet" href="_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/print.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '',
        COLLAPSE_INDEX: true,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/theme_extras.js"></script>
   </head> 

     <div class="header"><h1 class="heading"><a href="#">
          <span>Mojito</span></a></h1>
      </div>
      <div class="topnav">
        <p>
        <a class="uplink" href="../">Mojito Documentation</a>
        &#160;&#160;::&#160;&#160;
        <a href="../index.html" title="Mojito">Mojito</a>
        &#160;&#160;::&#160;&#160;
        
           <a href="mojito_quicktour.html">Mojito: A Quick Tour</a>
        &#160;&#160;::&#160;&#160;
        
        
           <a href="mojito_apps.html">Mojito Applications</a>
        
        </p>

      </div>
      <div class="content">
   <div class="section" id="mojito-architecture">
<h1>Mojito Architecture<a class="headerlink" href="#mojito-architecture" title="Permalink to this headline">¶</a></h1>
<p>This chapter attempts to give you a general understanding of the architecture of
the Mojito Framework. Our hope is that having a better understanding of how the
pieces work together and what role they play will help you design, build, and
debug your Mojito applications more effectively.</p>
<div class="section" id="overview">
<span id="mj-arch-overview"></span><h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>Before looking at the details of Mojito, let&#8217;s take a look at how Mojito
fits in the Web application world. In the diagram below, the triangular symbol
formed with three circles represents the Mojito MVC core; the circles represent
the model, view, and controller. This common MVC core executes across devices
and on both client and server and is one of the key elements which gives Mojito
its power. As the diagram illustrates, Mojito runs on various clients, uses
HTTP for all client-server communication, and typically accesses data with the
Yahoo! Query Language (YQL) due to its power, ease-of-use, and ability to run
from either the client or server.</p>
<a class="reference internal image-reference" href="../_images/mojito_architecture.png"><img alt="Diagram showing Mojito running on different clients." class="align-center" src="../_images/mojito_architecture.png" style="width: 390.15px; height: 487.9px;" /></a>
<p><span class="raw-html"><br clear="all"/></span></p>
</div>
<div class="section" id="clients-and-runtimes">
<span id="overview-clients"></span><h2>Clients and Runtimes<a class="headerlink" href="#clients-and-runtimes" title="Permalink to this headline">¶</a></h2>
<p>Mojito was designed with the goal of running in multiple runtime environments
and supporting online and offline experiences. The following are the supported
client/runtime environments:</p>
<ul class="simple">
<li><strong>Mobile browser:</strong> - supports an HTML-based online experience and may also
support an HTML5-based offline experience.</li>
<li><strong>Desktop browser:</strong> - assumed to be always connected and support an
HTML-based online experience.</li>
<li><strong>Native client:</strong> - deployed as packaged applications, wrapping native
chrome around an HTML5-based experience.</li>
</ul>
</div>
<div class="section" id="mojito-applications">
<span id="overview-apps"></span><h2>Mojito Applications<a class="headerlink" href="#mojito-applications" title="Permalink to this headline">¶</a></h2>
<p>A Mojito application is, quite simply, a set of module/widget components
(called mojits) bound together with one or more JSON configuration files
which describe the application model, view, and controller code used depending
on context. A Mojito application is packaged to be distributed and deployed
as a unit, and as such, it is deployment-independent. The mojits used by an
application may be included directly within the package or may be included
by reference from a cloud-based repository.</p>
<p>See also <a class="reference external" href="./mojito_apps.html">Mojito Applications</a> for a more in-depth
discussion.</p>
</div>
<div class="section" id="data">
<span id="overview-data"></span><h2>Data<a class="headerlink" href="#data" title="Permalink to this headline">¶</a></h2>
<p>To support seamless operation and migration of components between client and
server, Mojito application data is typically obtained with YQL. In most cases,
your data will be requested and processed in some way before it is presented to
the user. JSON is expected to be by far the most prevalent format for data
retrieved from YQL.</p>
</div>
<div class="section" id="mojito-framework">
<span id="mj-arch-framework"></span><h2>Mojito Framework<a class="headerlink" href="#mojito-framework" title="Permalink to this headline">¶</a></h2>
<p>The Mojito Framework consists of both module-level and application-level framing,
which taken together provide the infrastructure upon which applications are
built. Mojito framing includes the base component framework, the event system,
and management of navigation, views, and configuration. Mojito is built directly
on top of YUI and can be considered an extension of it.</p>
<p>At the bottom of the stack, for the purposes of this discussion at least, is an
implementation of the Node.js API. We use the Node.js API as the definition of an
abstraction below, which we may elect to deploy Node.js or an alternative
implementation built atop another server-side JavaScript container.</p>
<p>This diagram shows the relationships among the Mojito application, the Mojito
Core, mojits, and the runtime environments. The subsequent sections describe the
elements in the diagram in more detail.</p>
<a class="reference internal image-reference" href="../_images/mojito_framework.png"><img alt="Diagram showing the relationships between the Mojito application, Mojito core, mojits, and runtime environments." class="align-center" src="../_images/mojito_framework.png" style="width: 610.3px; height: 436.05px;" /></a>
<p><span class="raw-html"><br clear="all"/></span></p>
<div class="section" id="mojito-server-runtime">
<span id="framework-server-runtime"></span><h3>Mojito Server Runtime<a class="headerlink" href="#mojito-server-runtime" title="Permalink to this headline">¶</a></h3>
<p>The base server-only capabilities that support the Mojito Core include,
but are not limited to, the following:</p>
<ul class="simple">
<li>HTTP Server</li>
<li>Routing Rules</li>
<li>Config Loader</li>
<li>Disk-Based Loader</li>
</ul>
</div>
<div class="section" id="mojito-client-runtime">
<span id="framework-client-runtime"></span><h3>Mojito Client Runtime<a class="headerlink" href="#mojito-client-runtime" title="Permalink to this headline">¶</a></h3>
<p>The base client-only capabilities that support the Mojito Core include, but are
not limited to, the following:</p>
<ul class="simple">
<li>URL-Based / JSON-Based Loader</li>
<li>Local Storage / Cache Access</li>
</ul>
</div>
<div class="section" id="mojito-core">
<span id="framework-core"></span><h3>Mojito Core<a class="headerlink" href="#mojito-core" title="Permalink to this headline">¶</a></h3>
<p>The Mojito Core is the common functionality of Mojito that runs on both server
and client. The core is initialized (or bootstrapped, if you will) by either the
Mojito Server Runtime or the Mojito Client Runtime, as appropriate. Elements of
the Mojito Core include, but are not limited to, the following:</p>
<ul class="simple">
<li>Front Controller</li>
<li>Dispatcher</li>
<li>Mojit Registry</li>
<li>Resource Store</li>
</ul>
</div>
<div class="section" id="mojit-container">
<span id="framework-mojit-container"></span><h3>Mojit Container<a class="headerlink" href="#mojit-container" title="Permalink to this headline">¶</a></h3>
<p>The Mojit Container is where mojit instances live. This is analogous in a
traditional Java Web framework to the servlet container. In Mojito the
component container logic runs in both server and client contexts. Mojit
container logic includes, but is not limited to, the following:</p>
<ul class="simple">
<li>Mojit Lifecycle Support</li>
</ul>
</div>
<div class="section" id="api-action-context">
<span id="framework-mojit-ac"></span><h3>&#8220;API&#8221; (Action Context)<a class="headerlink" href="#api-action-context" title="Permalink to this headline">¶</a></h3>
<p>The &#8220;API&#8221; block of the diagram represents the common API object provided to each
Mojit. This common API object is properly referred to as the Action Context.
A unique <tt class="docutils literal"><span class="pre">ActionContext</span></tt> object is available to each mojit instance to enable it
to do its work. In a traditional Web framework, this is analogous to the request
context (except, of course, that there is no request object when the mojit is
running within the client).</p>
</div>
<div class="section" id="mojito-services">
<span id="framework-mojito-services"></span><h3>Mojito Services<a class="headerlink" href="#mojito-services" title="Permalink to this headline">¶</a></h3>
<p>The Services block is a customizable layer within Mojito, typically created with a
combination of custom middleware and <tt class="docutils literal"><span class="pre">ActionContext</span></tt> addons, which allow your
applications to make use of common services. Mojito does not make any
presumptions about required services, but instead provides the means for reusable
services to be developed as extensions to the core framework.</p>
<span class="target" id="framework-model-factory"></span></div>
<div class="section" id="view-factory">
<span id="framework-view-factory"></span><h3>View Factory<a class="headerlink" href="#view-factory" title="Permalink to this headline">¶</a></h3>
<p>The View Factory creates the view instance for a
mojit instance based on a mojit&#8217;s configuration and on its corresponding mojit
definition. The following standard view types are provided, along with the
capability for a mojit developer to define a custom view type:</p>
<ul class="simple">
<li>Template View</li>
<li>DOM View</li>
<li>Hybrid View</li>
</ul>
</div>
<div class="section" id="view-cache">
<span id="framework-view-cache"></span><h3>View Cache<a class="headerlink" href="#view-cache" title="Permalink to this headline">¶</a></h3>
<p>The View Cache provides applications with the ability to cache. For example,
because of the View Cache, an application can cache partially rendered views to
improve performance in situations where the same partial rendering is frequently
requested.</p>
</div>
</div>
<div class="section" id="mojito-framework-components">
<span id="mj-arch-framework-components"></span><h2>Mojito Framework Components<a class="headerlink" href="#mojito-framework-components" title="Permalink to this headline">¶</a></h2>
<p>Box A in the flowchart below represents the Application Container at its most
basic level. Here we focus on the servicing of page requests and user
interactions, and ignore for the moment issues such as packaging and deployment.
Again, we examine more closely the framework components in the following
sections.</p>
<img alt="Flowchart showing how page requests are handled and responses returned." class="align-center" src="../_images/mojito_components.png" style="width: 457px; height: 540px;" />
<p><span class="raw-html"><br clear="all"/></span></p>
<div class="section" id="dispatcher-mapper">
<span id="framework-components-dispatcher"></span><h3>Dispatcher/Mapper<a class="headerlink" href="#dispatcher-mapper" title="Permalink to this headline">¶</a></h3>
<p>This component processes incoming URLs and determines how to map these to the
appropriate application functionality. This is similar in many ways to the front
controller used in most action frameworks. The target functionality is almost
always provided by a mojit, and thus, the Dispatcher primarily maps URLs to
mojit identifiers.</p>
</div>
<div class="section" id="navigation-manager">
<span id="framework-components-nav-manager"></span><h3>Navigation Manager<a class="headerlink" href="#navigation-manager" title="Permalink to this headline">¶</a></h3>
<p>In some applications, it is important that certain <em>destinations</em> within the
application be URL addressable (e.g., to allow the user to create bookmarks to
specific points or states within the application). This is most easily managed
through a central Navigation Manager that both assists the Dispatcher in
resolving URLs and provides URL management facilities to application
functionality. Note that many sites and simpler applications have no need of URL
management, so this component may not be used in such cases.</p>
</div>
<div class="section" id="mojit-host">
<span id="framework-components-mojit-host"></span><h3>Mojit Host<a class="headerlink" href="#mojit-host" title="Permalink to this headline">¶</a></h3>
<p>The mojits themselves are not part of the Application Container per se. The
container provides the facilities to host, support, and manage mojits while the
mojits collectively provide the functionality of the application. See also
<a class="reference external" href="mojito_mojits.html">Mojits</a> for more information about mojits.</p>
</div>
<div class="section" id="application-configuration">
<span id="framework-components-app-config"></span><h3>Application Configuration<a class="headerlink" href="#application-configuration" title="Permalink to this headline">¶</a></h3>
<p>A particular instance of the Application Container is initialized through an
externally managed configuration. This configuration includes, among other
things, the mappings that drive the Dispatcher, the identification of necessary
mojit registries, and other environmental parameters. The Application
Configuration, however, specifically excludes deployment parameters because it
is part of the packaged, deployable application, and therefore, must not be tied to a
particular deployment environment.</p>
</div>
</div>
</div>

   </div>

