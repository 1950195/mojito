

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
     <title>Action Context Addons</title>
    <link rel="stylesheet" href="_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/print.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '',
        COLLAPSE_INDEX: true,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/theme_extras.js"></script>
   </head> 

     <div class="header"><h1 class="heading"><a href="#">
          <span>Mojito</span></a></h1>
      </div>
      <div class="topnav">
        <p>
        <a class="uplink" href="../">Mojito Documentation</a>
        &#160;&#160;::&#160;&#160;
        <a href="../index.html" title="Mojito">Mojito</a>
        &#160;&#160;::&#160;&#160;
        
           <a href="mojito_action_context.html">Action Context</a>
        &#160;&#160;::&#160;&#160;
        
        
           <a href="mojito_rest_lib.html">REST Library</a>
        
        </p>

      </div>
      <div class="content">
   <div class="section" id="action-context-addons">
<h1>Action Context Addons<a class="headerlink" href="#action-context-addons" title="Permalink to this headline">¶</a></h1>
<p>The Action Context uses a mechanism called addons to provide functionality that lives both
on the server and client. Each addon provides additional functions through a namespacing
object that is appended to the <tt class="docutils literal"><span class="pre">ActionContext</span></tt> object. The <tt class="docutils literal"><span class="pre">ActionContext</span></tt> object
is available in each controller function, but controllers need to
<a class="reference internal" href="#addons-requiring"><em>require addons</em></a> before accessing addon methods.
See the <a class="reference external" href="../../api/classes/ActionContext.html">ActionContext Class</a>
for the addon classes.</p>
<p>The Action Context addons allow you to do the following:</p>
<ul class="simple">
<li>access assets, such as CSS and JavaScript files</li>
<li>get configuration information</li>
<li>get and set cookies</li>
<li>localize content</li>
<li>access query and response parameters</li>
<li>get and set HTTP headers</li>
<li>create URLs</li>
</ul>
<div class="section" id="syntax">
<span id="mojito-addons-syntax"></span><h2>Syntax<a class="headerlink" href="#syntax" title="Permalink to this headline">¶</a></h2>
<p>Using the <tt class="docutils literal"><span class="pre">ActionContext</span></tt> object <tt class="docutils literal"><span class="pre">ac</span></tt>, you would call a <tt class="docutils literal"><span class="pre">{method}</span></tt> from an
<tt class="docutils literal"><span class="pre">{addon}</span></tt> with the following syntax:</p>
<p><tt class="docutils literal"><span class="pre">ac.{addon}.{method}</span></tt></p>
<p>For example, to get all of the query string parameters, you would use the <tt class="docutils literal"><span class="pre">Params</span></tt> addon
with the <tt class="docutils literal"><span class="pre">url</span></tt> method as seen here:</p>
<p><tt class="docutils literal"><span class="pre">ac.params.url()</span></tt></p>
</div>
<div class="section" id="requiring-addons">
<span id="addons-requiring"></span><h2>Requiring Addons<a class="headerlink" href="#requiring-addons" title="Permalink to this headline">¶</a></h2>
<p>Prior to version 0.5.0, Mojito attached addons to the <tt class="docutils literal"><span class="pre">ActionContext</span></tt> object for
every HTTP request and mojit instance. As a result, you were able to use
any of the Action Context addons by default.</p>
<p>In Mojito versions 0.5.0 and later, you need to explicitly require an addon before you
can use it. You require an addon by including an associated string in the
<tt class="docutils literal"><span class="pre">requires</span></tt> array of your controller. For example, in the controller below,
the <tt class="docutils literal"><span class="pre">Params</span></tt> addon is required by adding the string <tt class="docutils literal"><span class="pre">'mojito-params-addon'</span></tt>
to the <tt class="docutils literal"><span class="pre">requires</span></tt> array.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">YUI</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;Foo&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">Y</span><span class="p">,</span> <span class="nx">NAME</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">Y</span><span class="p">.</span><span class="nx">namespace</span><span class="p">(</span><span class="s1">&#39;mojito.controllers&#39;</span><span class="p">)[</span><span class="nx">NAME</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">index</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ac</span><span class="p">)</span> <span class="p">{</span>
         <span class="kd">var</span> <span class="nx">all_params</span> <span class="o">=</span> <span class="nx">ac</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">all</span><span class="p">();</span>
      <span class="p">}</span>
  <span class="p">};</span>
    <span class="c1">// Require the addon by adding the param name to the requires array</span>
<span class="p">},</span> <span class="s1">&#39;0.0.1&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">requires</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;mojito&#39;</span><span class="p">,</span> <span class="s1">&#39;mojito-params-addon&#39;</span><span class="p">]});</span>
</pre></div>
</div>
<p>The list below shows what strings are used to require addons.</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">Assets</span></tt> addon - <tt class="docutils literal"><span class="pre">requires</span> <span class="pre">['mojito-assets-addon']</span></tt></li>
<li><tt class="docutils literal"><span class="pre">Composite</span></tt> addon - <tt class="docutils literal"><span class="pre">requires</span> <span class="pre">['mojito-composite-addon']</span></tt></li>
<li><tt class="docutils literal"><span class="pre">Config</span></tt> addon - <tt class="docutils literal"><span class="pre">requires</span> <span class="pre">['mojito-config-addon']</span></tt></li>
<li><tt class="docutils literal"><span class="pre">Cookies</span></tt> addon - <tt class="docutils literal"><span class="pre">requires</span> <span class="pre">['mojito-cookie-addon']</span></tt></li>
<li><tt class="docutils literal"><span class="pre">Http</span></tt> addon - <tt class="docutils literal"><span class="pre">requires</span> <span class="pre">['mojito-http-addon']</span></tt></li>
<li><tt class="docutils literal"><span class="pre">Intl</span></tt> addon - <tt class="docutils literal"><span class="pre">requires</span> <span class="pre">['mojito-intl-addon']</span></tt></li>
<li><tt class="docutils literal"><span class="pre">Params</span></tt> addon - <tt class="docutils literal"><span class="pre">requires</span> <span class="pre">['mojito-params-addon']</span></tt></li>
<li><tt class="docutils literal"><span class="pre">Url</span></tt> addon - <tt class="docutils literal"><span class="pre">requires</span> <span class="pre">['mojito-url-addon']</span></tt></li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To run older applications with Mojito v0.5.0 and later, you will need to
modify your controllers so that the ActionContext addons that are being
used are required. The most common addons are <tt class="docutils literal"><span class="pre">Config</span></tt>, <tt class="docutils literal"><span class="pre">Params</span></tt>, <tt class="docutils literal"><span class="pre">Url</span></tt>,
and <tt class="docutils literal"><span class="pre">Assets</span></tt>.</p>
</div>
</div>
<div class="section" id="addon-examples">
<span id="mojito-addons-exs"></span><h2>Addon Examples<a class="headerlink" href="#addon-examples" title="Permalink to this headline">¶</a></h2>
<p>The following code examples use the addons in parentheses:</p>
<ul class="simple">
<li><a class="reference external" href="../code_exs/dynamic_assets.html">Dynamically Adding CSS to Different Devices</a>
(<tt class="docutils literal"><span class="pre">Assets</span></tt>)</li>
<li><a class="reference external" href="../code_exs/cookies.html">Using Cookies</a> (<tt class="docutils literal"><span class="pre">Cookie</span></tt>)</li>
<li><a class="reference external" href="../code_exs/query_params.html">Using Query Parameters</a> (<tt class="docutils literal"><span class="pre">Params</span></tt>)</li>
<li><a class="reference external" href="../code_exs/generating_urls.html">Generating URLs</a> (<tt class="docutils literal"><span class="pre">Url</span></tt>)</li>
<li><a class="reference external" href="../code_exs/i18n_apps.html">Internationalizing Your Application</a> (<tt class="docutils literal"><span class="pre">Intl</span></tt>)</li>
<li><a class="reference external" href="../code_exs/multiple_mojits.html">Using Multiple Mojits</a> (<tt class="docutils literal"><span class="pre">Composite</span></tt>)</li>
</ul>
</div>
<div class="section" id="creating-addons">
<span id="mojito-addons-create"></span><h2>Creating Addons<a class="headerlink" href="#creating-addons" title="Permalink to this headline">¶</a></h2>
<p>Because customized addons are not part of the standard API, but an extension of the API,
the instructions for creating addons can be found in
<a class="reference external" href="../topics/mojito_extensions.html#creating-new-addons">Creating New Addons</a>.</p>
</div>
</div>

   </div>

