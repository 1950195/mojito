

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
     <title>Frame Mojits</title>
    <link rel="stylesheet" href="_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/print.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '',
        COLLAPSE_INDEX: true,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/theme_extras.js"></script>
   </head> 

     <div class="header"><h1 class="heading"><a href="#">
          <span>Mojito</span></a></h1>
      </div>
      <div class="topnav">
        <p>
        <a class="uplink" href="../">Mojito Documentation</a>
        &#160;&#160;::&#160;&#160;
        <a href="../index.html" title="Mojito">Mojito</a>
        &#160;&#160;::&#160;&#160;
        
           <a href="mojito_run_dyn_defined_mojits.html">Running Dynamically Defined Mojit Instances</a>
        &#160;&#160;::&#160;&#160;
        
        
           <a href="mojito_extensions.html">Extending Mojito</a>
        
        </p>

      </div>
      <div class="content">
   <div class="section" id="frame-mojits">
<h1>Frame Mojits<a class="headerlink" href="#frame-mojits" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<span id="mojito-fw-mojits-intro"></span><h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Mojito comes with the built-in utility mojits that make developing applications easier.
Mojito currently comes with the <tt class="docutils literal"><span class="pre">HTMLFrameMojit</span></tt> that constructs Web pages from the
skeleton HTML to the styling and content and the <tt class="docutils literal"><span class="pre">LazyLoadMojit</span></tt> that allows you to
lazily load mojit code. Mojito plans to offer additional frame mojits in the future.</p>
</div>
<div class="section" id="htmlframemojit">
<span id="mojito-fw-mojits-htmlframe"></span><h2>HTMLFrameMojit<a class="headerlink" href="#htmlframemojit" title="Permalink to this headline">¶</a></h2>
<p>The <tt class="docutils literal"><span class="pre">HTMLFrameMojit</span></tt> builds the HTML skeleton of a Web page. When you use
<tt class="docutils literal"><span class="pre">HTMLFrameMojit</span></tt> the <tt class="docutils literal"><span class="pre">&lt;html&gt;</span></tt>, <tt class="docutils literal"><span class="pre">&lt;head&gt;</span></tt>, and <tt class="docutils literal"><span class="pre">&lt;body&gt;</span></tt> elements are automatically
created and the content from child mojits are inserted into the <tt class="docutils literal"><span class="pre">&lt;body&gt;</span></tt> element.
The <tt class="docutils literal"><span class="pre">HTMLFrameMojit</span></tt> can also automatically insert assets such as CSS and JavaScript
files into either the <tt class="docutils literal"><span class="pre">&lt;head&gt;</span></tt> or <tt class="docutils literal"><span class="pre">&lt;body&gt;</span></tt> elements.</p>
<p>Because it builds the Web page from the framework to the content and styling, the
<tt class="docutils literal"><span class="pre">HTMLFrameMojit</span></tt> must be the top-level mojit in a Mojito application. As the top-level
or parent mojit, the <tt class="docutils literal"><span class="pre">HTMLFrameMojit</span></tt> may have one or more child mojits.</p>
<p>To see examples of applications using <tt class="docutils literal"><span class="pre">HTMLFrameMojit</span></tt>, see the
code examples <a class="reference external" href="../code_exs/htmlframe_view.html">Using the HTML Frame Mojit</a>
and <a class="reference external" href="../code_exs/framed_assets.html">Attaching Assets with HTMLFrameMojit</a>.</p>
<div class="section" id="configuration">
<span id="fw-mojits-htmlframe-config"></span><h3>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h3>
<p>As with defining instances of other mojit types, you define an instance of the
<tt class="docutils literal"><span class="pre">HTMLFrameMojit</span></tt> in
<a class="reference external" href="../intro/mojito_configuring.html#configuration-object">configuration object</a>
of <tt class="docutils literal"><span class="pre">application.json</span></tt>. Because <tt class="docutils literal"><span class="pre">HTMLFrameMojit</span></tt> must be the top-level mojit,
its instance cannot have a parent instance, but may have one or more child
instances.</p>
<p>In the example <tt class="docutils literal"><span class="pre">application.json</span></tt> below, <tt class="docutils literal"><span class="pre">frame</span></tt> is an instance of
<tt class="docutils literal"><span class="pre">HTMLFrameMojit</span></tt> that has the <tt class="docutils literal"><span class="pre">child</span></tt> instance of the <tt class="docutils literal"><span class="pre">framed</span></tt> mojit.
After the HTML skeleton is created, the <tt class="docutils literal"><span class="pre">HTMLFrameMojit</span></tt> will insert the
value of the <tt class="docutils literal"><span class="pre">title</span></tt> property into the <tt class="docutils literal"><span class="pre">&lt;title&gt;</span></tt> element and the content
created by the <tt class="docutils literal"><span class="pre">frame</span></tt> mojit into the <tt class="docutils literal"><span class="pre">&lt;body&gt;</span></tt> element.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;master&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;specs&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;frame&quot;</span> <span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span> <span class="o">:</span> <span class="s2">&quot;HTMLFrameMojit&quot;</span><span class="p">,</span>
        <span class="s2">&quot;config&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;title&quot;</span><span class="o">:</span> <span class="s2">&quot;Title of HTML page&quot;</span><span class="p">,</span>
          <span class="s2">&quot;child&quot;</span> <span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span> <span class="o">:</span> <span class="s2">&quot;framed&quot;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>To have multiple child instances, the <tt class="docutils literal"><span class="pre">HTMLFrameMojit</span></tt> instance must use the
<tt class="docutils literal"><span class="pre">children</span></tt> object to specify the child instances. In this example <tt class="docutils literal"><span class="pre">application.json</span></tt>,
the <tt class="docutils literal"><span class="pre">page</span></tt> instance of <tt class="docutils literal"><span class="pre">HTMLFrameMojit</span></tt> uses the <tt class="docutils literal"><span class="pre">children</span></tt> object to specify three
child instances that can create content for the rendered view.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;master&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;specs&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;page&quot;</span> <span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span> <span class="o">:</span> <span class="s2">&quot;HTMLFrameMojit&quot;</span><span class="p">,</span>
        <span class="s2">&quot;config&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;deploy&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
          <span class="s2">&quot;title&quot;</span><span class="o">:</span> <span class="s2">&quot;HTMLFrameMojit Example with Children&quot;</span><span class="p">,</span>
          <span class="s2">&quot;child&quot;</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;Body&quot;</span><span class="p">,</span>
            <span class="s2">&quot;config&quot;</span><span class="o">:</span> <span class="p">{</span>
              <span class="s2">&quot;children&quot;</span> <span class="o">:</span> <span class="p">{</span>
                <span class="s2">&quot;nav&quot;</span><span class="o">:</span> <span class="p">{</span>
                  <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;Navigation&quot;</span>
                <span class="p">},</span>
                <span class="s2">&quot;content&quot;</span><span class="o">:</span> <span class="p">{</span>
                  <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;articleBuilder&quot;</span>
                <span class="p">},</span>
                <span class="s2">&quot;footer&quot;</span> <span class="p">{</span>
                  <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;Footer&quot;</span>
                <span class="p">}</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<div class="section" id="deploying-to-client">
<span id="htmlframe-config-deploy"></span><h4>Deploying to Client<a class="headerlink" href="#deploying-to-client" title="Permalink to this headline">¶</a></h4>
<p>To configure Mojito to deploy code to the client, you set the <tt class="docutils literal"><span class="pre">deploy</span></tt> property of the
<a class="reference external" href="../intro/mojito_configuring.html#configuration-object">config</a> object to <tt class="docutils literal"><span class="pre">true</span></tt>
as shown below.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;master&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;specs&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;frame&quot;</span> <span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span> <span class="o">:</span> <span class="s2">&quot;HTMLFrameMojit&quot;</span><span class="p">,</span>
        <span class="s2">&quot;config&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;deploy&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
          <span class="s2">&quot;child&quot;</span> <span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span> <span class="o">:</span> <span class="s2">&quot;framed&quot;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<div class="section" id="what-gets-deployed">
<span id="config-deploy-what"></span><h5>What Gets Deployed?<a class="headerlink" href="#what-gets-deployed" title="Permalink to this headline">¶</a></h5>
<p>The following is deployed to the client:</p>
<ul class="simple">
<li>Mojito framework</li>
<li>binders (and their dependencies)</li>
</ul>
<p>When a binder invokes its controller, if the controller has the <tt class="docutils literal"><span class="pre">client</span></tt> or <tt class="docutils literal"><span class="pre">common</span></tt>
affinity, then the controller and its dependencies are deployed to the client as well. If
the affinity of the controller is <tt class="docutils literal"><span class="pre">server</span></tt>, the invocation occurs on the server. In
either case, the binder is able to transparently invoke the controller.</p>
</div>
</div>
</div>
<div class="section" id="adding-assets-with-htmlframemojit">
<span id="htmlframemojit-assets"></span><h3>Adding Assets with HTMLFrameMojit<a class="headerlink" href="#adding-assets-with-htmlframemojit" title="Permalink to this headline">¶</a></h3>
<p>You specify the assets for <tt class="docutils literal"><span class="pre">HTMLFrameMojit</span></tt> just as you would specify assets
for any mojit. The basic difference is that <tt class="docutils literal"><span class="pre">HTMLFrameMojit</span></tt> will
automatically attach <tt class="docutils literal"><span class="pre">&lt;link&gt;</span></tt> elements for CSS and <tt class="docutils literal"><span class="pre">&lt;script&gt;</span></tt> elements
for JavaScript files to the HTML page. When using assets with other mojits,
you have to manually add <tt class="docutils literal"><span class="pre">&lt;link&gt;</span></tt> elements that refer to assets to templates.
See <a class="reference external" href="./mojito_assets.html">Assets</a> for general information about using
assets in Mojito.</p>
<p>In the example <tt class="docutils literal"><span class="pre">application.json</span></tt> below, the <tt class="docutils literal"><span class="pre">HTMLFrameMojit</span></tt> instance
<tt class="docutils literal"><span class="pre">frame</span></tt> has one child mojit with a CSS asset. Because the assets are
listed in the <tt class="docutils literal"><span class="pre">top</span></tt> object, the <tt class="docutils literal"><span class="pre">HTMLFrameMojit</span></tt> will attach the <tt class="docutils literal"><span class="pre">&lt;link&gt;</span></tt>
element pointing to <tt class="docutils literal"><span class="pre">index.css</span></tt> to the <tt class="docutils literal"><span class="pre">&lt;head&gt;</span></tt> element.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;master&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;specs&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;frame&quot;</span> <span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span> <span class="o">:</span> <span class="s2">&quot;HTMLFrameMojit&quot;</span><span class="p">,</span>
        <span class="s2">&quot;config&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;child&quot;</span> <span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span> <span class="o">:</span> <span class="s2">&quot;framed&quot;</span>
          <span class="p">},</span>
          <span class="s2">&quot;assets&quot;</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;top&quot;</span><span class="o">:</span> <span class="p">{</span>
              <span class="s2">&quot;css&quot;</span><span class="o">:</span> <span class="p">[</span>
                <span class="s2">&quot;/static/framed/assets/css/index.css&quot;</span>
              <span class="p">]</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>The rendered view that was constructed by the <tt class="docutils literal"><span class="pre">HTMLFrameMojit</span></tt> should look
similar to the HTML below.</p>
<div class="highlight-html"><div class="highlight"><pre><span class="cp">&lt;!DOCTYPE HTML&gt;</span>
<span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;</span><span class="kd">var</span> <span class="nx">MOJITO_INIT</span><span class="o">=</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span><span class="nt">&lt;/script&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">&quot;creator&quot;</span> <span class="na">content=</span><span class="s">&quot;Yahoo! Mojito 0.1.0&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;title&gt;</span>Powered by Mojito 0.1.0<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span> <span class="na">href=</span><span class="s">&quot;/static/framed/assets/css/index.css&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;yui_3_3_0_3_131500627867611&quot;</span> <span class="na">class=</span><span class="s">&quot;mojit&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;h2</span> <span class="na">id=</span><span class="s">&quot;header&quot;</span><span class="nt">&gt;</span>Framed Assets<span class="nt">&lt;/h2&gt;</span>
      <span class="nt">&lt;p&gt;</span>Page Content<span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="lazyloadmojit">
<span id="mojito-fw-mojits-lazyloadmojit"></span><h2>LazyLoadMojit<a class="headerlink" href="#lazyloadmojit" title="Permalink to this headline">¶</a></h2>
<p><tt class="docutils literal"><span class="pre">LazyLoadMojit</span></tt> allows you to defer the loading of a mojit instance by first
dispatching the <tt class="docutils literal"><span class="pre">LazyLoadMoit</span></tt> as a proxy to the client. From the client,
<tt class="docutils literal"><span class="pre">LazyLoadMojit</span></tt> can then request Mojito to load the proxied mojit. This allows
your Mojito application to load the page quickly and then lazily load parts of
the page.</p>
<div class="section" id="how-does-it-work">
<span id="fw-mojits-lazyload-how"></span><h3>How Does It Work?<a class="headerlink" href="#how-does-it-work" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">LazyLoadMojit</span></tt> is really a proxy mojit that dispatches its binder and an
empty DOM node to the client. From the client, the binder sends a request to the
controller to execute the code of the proxied (original) mojit. The output from
the executed mojit is then returned to the binder of the <tt class="docutils literal"><span class="pre">LazyLoadMojit</span></tt>, which
attaches the output to the empty DOM node. The binder of <tt class="docutils literal"><span class="pre">LazyLoadMojit</span></tt> destroys
itself, leaving the DOM intact with the new content.</p>
</div>
<div class="section" id="configuring-lazy-loading">
<span id="fw-mojits-lazyload-config"></span><h3>Configuring Lazy Loading<a class="headerlink" href="#configuring-lazy-loading" title="Permalink to this headline">¶</a></h3>
<p>To use the <tt class="docutils literal"><span class="pre">LazyLoadMojit</span></tt>, the <tt class="docutils literal"><span class="pre">application.json</span></tt> must do the following:</p>
<ul class="simple">
<li>create a top-level mojit instance of type <tt class="docutils literal"><span class="pre">HTMLFrameMojit</span></tt></li>
<li>deploy the mojit instance of type <tt class="docutils literal"><span class="pre">HTMLFrameMojit</span></tt> to the client (<tt class="docutils literal"><span class="pre">&quot;deploy&quot;:</span> <span class="pre">true</span></tt>)</li>
<li>create a container mojit that has children mojit instances (<tt class="docutils literal"><span class="pre">&quot;children&quot;:</span> <span class="pre">{</span> <span class="pre">...</span> <span class="pre">}</span></tt>)</li>
<li>defer the dispatch of the mojit instance that will be lazily loaded (<tt class="docutils literal"><span class="pre">&quot;defer&quot;:</span> <span class="pre">true</span></tt>)</li>
</ul>
<p>In the example <tt class="docutils literal"><span class="pre">application.json</span></tt> below, the child mojit instance <tt class="docutils literal"><span class="pre">myLazyMojit</span></tt> is
configured to be lazily loaded. The action (<tt class="docutils literal"><span class="pre">hello</span></tt>) of the proxied mojit is also
configured to be executed after lazy loading is complete.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;master&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;specs&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;frame&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;HTMLFrameMojit&quot;</span><span class="p">,</span>
        <span class="s2">&quot;config&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;deploy&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
          <span class="s2">&quot;child&quot;</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;Container&quot;</span><span class="p">,</span>
            <span class="s2">&quot;config&quot;</span><span class="o">:</span> <span class="p">{</span>
              <span class="s2">&quot;children&quot;</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">&quot;myLazyMojit&quot;</span><span class="o">:</span> <span class="p">{</span>
                  <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;LazyPants&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;hello&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;defer&quot;</span><span class="o">:</span> <span class="kc">true</span>
                <span class="p">},</span>
                <span class="s2">&quot;myActiveMojit&quot;</span><span class="o">:</span> <span class="p">{</span>
                   <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;GoGetter&quot;</span><span class="p">,</span>
                <span class="p">}</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="example">
<span id="fw-mojits-lazyload-ex"></span><h3>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h3>
<p>This example shows you application configuration as well as the code for the
parent mojit and the child mojit that is lazy loaded.  If you were to run
this lazy load example, you would see the content of the parent mojit first
and then see the rendered view of the child mojit loaded onto the page.</p>
<div class="section" id="application-configuration">
<span id="lazyload-ex-app-config"></span><h4>Application Configuration<a class="headerlink" href="#application-configuration" title="Permalink to this headline">¶</a></h4>
<p>The application configuration for this example (shown below) meets the
requirements for using <tt class="docutils literal"><span class="pre">LazyLoadMojit</span></tt>:</p>
<ul class="simple">
<li>creates the <tt class="docutils literal"><span class="pre">frame</span></tt> mojit instance of type <tt class="docutils literal"><span class="pre">HTMLFrameMojit</span></tt></li>
<li>sets <tt class="docutils literal"><span class="pre">&quot;deploy&quot;</span></tt> to <tt class="docutils literal"><span class="pre">true</span></tt> for <tt class="docutils literal"><span class="pre">frame</span></tt> so that the code is deployed
to the client</li>
<li>creates the <tt class="docutils literal"><span class="pre">child</span></tt> mojit instance that has the <tt class="docutils literal"><span class="pre">children</span></tt> object
specifying child mojit instance</li>
<li>configures the <tt class="docutils literal"><span class="pre">myLazyMojit</span></tt> instance to defer being dispatched, which
causes it to be lazily loaded by <tt class="docutils literal"><span class="pre">LazyLoadMojit</span></tt></li>
</ul>
<p>In this <tt class="docutils literal"><span class="pre">application.json</span></tt>, the <tt class="docutils literal"><span class="pre">parent</span></tt> mojit instance has the one child
<tt class="docutils literal"><span class="pre">myLazyMojit</span></tt>. The <tt class="docutils literal"><span class="pre">myLazyMojit</span></tt> mojit instance of type <tt class="docutils literal"><span class="pre">LazyChild</span></tt> is
the mojit that will be lazily loaded by <tt class="docutils literal"><span class="pre">LazyLoadMojit</span></tt>. In a production
application, you could configure the application to have many child instances
that are lazily loaded after the parent mojit instance is already loaded onto
the page.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;master&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;specs&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;frame&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;HTMLFrameMojit&quot;</span><span class="p">,</span>
        <span class="s2">&quot;config&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;deploy&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
          <span class="s2">&quot;parent&quot;</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;Container&quot;</span><span class="p">,</span>
            <span class="s2">&quot;config&quot;</span><span class="o">:</span> <span class="p">{</span>
              <span class="s2">&quot;children&quot;</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">&quot;myLazyMojit&quot;</span><span class="o">:</span> <span class="p">{</span>
                  <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;LazyChild&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;hello&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;defer&quot;</span><span class="o">:</span> <span class="kc">true</span>
                <span class="p">}</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="container-mojit">
<span id="lazyload-ex-container-mojit"></span><h4>Container Mojit<a class="headerlink" href="#container-mojit" title="Permalink to this headline">¶</a></h4>
<p>The <tt class="docutils literal"><span class="pre">Container</span></tt> mojit uses <tt class="docutils literal"><span class="pre">ac.composite.done</span></tt> to execute its child mojits.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">YUI</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;Container&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">Y</span><span class="p">,</span> <span class="nx">NAME</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">Y</span><span class="p">.</span><span class="nx">namespace</span><span class="p">(</span><span class="s1">&#39;mojito.controllers&#39;</span><span class="p">)[</span><span class="nx">NAME</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
  <span class="cm">/**</span>
<span class="cm">  * Method corresponding to the &#39;index&#39; action.</span>
<span class="cm">  *</span>
<span class="cm">  * @param ac {Object} The ActionContext that</span>
<span class="cm">  * provides access to the Mojito API.</span>
<span class="cm">  */</span>
    <span class="nx">index</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ac</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">ac</span><span class="p">.</span><span class="nx">composite</span><span class="p">.</span><span class="nx">done</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">},</span> <span class="s1">&#39;0.0.1&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">requires</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;mojito&#39;</span><span class="p">,</span> <span class="s1">&#39;mojito-composite-addon&#39;</span><span class="p">]});</span>
</pre></div>
</div>
<p>Instead of waiting for the child mojit to execute, the partially rendered view
of the <tt class="docutils literal"><span class="pre">Container</span></tt> mojit is immediately sent to the client. After the child
mojit is lazily loaded, the content of the executed child replaces the Handlebars
expression <tt class="docutils literal"><span class="pre">{{{myLazyMojit}}}</span></tt>.</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;{{mojit_view_id}}&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;h1&gt;</span>Lazy Loading<span class="nt">&lt;/h1&gt;</span>
  <span class="nt">&lt;hr/&gt;</span>
    {{{myLazyMojit}}
  <span class="nt">&lt;hr/&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="lazychild-mojit">
<span id="lazyload-ex-lazychild-mojit"></span><h4>LazyChild Mojit<a class="headerlink" href="#lazychild-mojit" title="Permalink to this headline">¶</a></h4>
<p>The <tt class="docutils literal"><span class="pre">LazyLoadMojit</span></tt> in the <tt class="docutils literal"><span class="pre">application.json</span></tt> is configured to lazily load
the mojit instance <tt class="docutils literal"><span class="pre">myLazyMojit</span></tt> and then call the action <tt class="docutils literal"><span class="pre">hello</span></tt>. Thus,
the <tt class="docutils literal"><span class="pre">index</span></tt> function in the <tt class="docutils literal"><span class="pre">LazyChild</span></tt> mojit below is never called.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">YUI</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;LazyChild&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">Y</span><span class="p">,</span> <span class="nx">NAME</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">Y</span><span class="p">.</span><span class="nx">namespace</span><span class="p">(</span><span class="s1">&#39;mojito.controllers&#39;</span><span class="p">)[</span><span class="nx">NAME</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">hello</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ac</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">ac</span><span class="p">.</span><span class="nx">done</span><span class="p">({</span><span class="nx">time</span><span class="o">:</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">()});</span>
    <span class="p">},</span>
    <span class="nx">index</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ac</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">ac</span><span class="p">.</span><span class="nx">done</span><span class="p">(</span><span class="s2">&quot;This is never seen.&quot;</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">},</span> <span class="s1">&#39;0.0.1&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">requires</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;mojito&#39;</span><span class="p">]});</span>
</pre></div>
</div>
<p>The template <tt class="docutils literal"><span class="pre">hello.hb.html</span></tt> is rendered on the server and then lazily loaded
to the client.</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;{{mojit_view_id}}&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;h2&gt;</span>I was lazy-loaded at {{{time}}}.<span class="nt">&lt;/h2&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="creating-custom-frame-mojits">
<span id="mojito-fw-mojits-create"></span><h2>Creating Custom Frame Mojits<a class="headerlink" href="#creating-custom-frame-mojits" title="Permalink to this headline">¶</a></h2>
<p>In addition to the frame mojits that come with Mojito, you can create your own
frame mojit, which is just another mojit that manages assets, metadata, executes
child mojits, constructs the HTML page, and anything else that you want it to do.</p>
<p>Before creating a custom frame mojit, we recommend that you have
done the following:</p>
<ul class="simple">
<li>used the <tt class="docutils literal"><span class="pre">HTMLFrameMojit</span></tt> and the <tt class="docutils literal"><span class="pre">Composite</span></tt> addon in a Mojito application</li>
<li>examined the <a class="reference external" href="https://github.com/yahoo/mojito/tree/master/lib/app/mojits/HTMLFrameMojit">HTMLFrameMojit code</a>
that is part of Mojito</li>
</ul>
<div class="section" id="why-create-a-custom-frame-mojit">
<span id="create-frame-mojits-why"></span><h3>Why Create a Custom Frame Mojit?<a class="headerlink" href="#why-create-a-custom-frame-mojit" title="Permalink to this headline">¶</a></h3>
<p>By being able to create a custom frame mojit, you can control how the HTML page
is constructed, from the HTML skeleton, the metadata, and attachment of assets, to
the rendering of mojits in the page. For example, you could create a dynamic
HTML title, add custom metadata in the <tt class="docutils literal"><span class="pre">head</span></tt> element, or change the organization
of the page based on the runtime environment.</p>
</div>
<div class="section" id="what-frame-mojits-cannot-do">
<span id="create-frame-mojits-cannot-do"></span><h3>What Frame Mojits Cannot Do<a class="headerlink" href="#what-frame-mojits-cannot-do" title="Permalink to this headline">¶</a></h3>
<p>Code from your frame mojit cannot be deployed to run on the client. It <strong>must</strong> run on
the server. Thus, your frame mojit cannot have binders, and the controller of
your frame mojit must have the <tt class="docutils literal"><span class="pre">server</span></tt> affinity. The frame mojit&#8217;s child mojits
handle dynamic content and user interaction.</p>
</div>
<div class="section" id="responsibilities-of-the-frame-mojit">
<span id="create-frame-mojits-responsibilities"></span><h3>Responsibilities of the Frame Mojit<a class="headerlink" href="#responsibilities-of-the-frame-mojit" title="Permalink to this headline">¶</a></h3>
<p>The frame mojit is responsible for the following:</p>
<ul class="simple">
<li>constructing the HTML page</li>
<li>collecting the assets of your children and attaching them to the page</li>
<li>deploying the client code of its children to the client</li>
<li>executing child mojits and attaching the output to the HTML page</li>
</ul>
<p>How your frame mojit accomplishes the tasks above largely depends on your implementation.
We will delve into these responsibilities in more detail in the following sections.</p>
</div>
<div class="section" id="configuring-your-frame-mojit">
<span id="create-frame-mojits-configuring"></span><h3>Configuring Your Frame Mojit<a class="headerlink" href="#configuring-your-frame-mojit" title="Permalink to this headline">¶</a></h3>
<p>The configuration to use a custom frame mojit should be similar to the configuration
for using the <tt class="docutils literal"><span class="pre">HTMLFrameMojit</span></tt>, but you have more flexibility because you
have control over the implementation of the frame mojit.</p>
<p>In the <tt class="docutils literal"><span class="pre">application.json</span></tt> below, the instance <tt class="docutils literal"><span class="pre">fm</span></tt> of the frame mojit <tt class="docutils literal"><span class="pre">MyFrameMojit</span></tt>
is configured to have children mojits. The implementation of <tt class="docutils literal"><span class="pre">MyFrameMojit</span></tt> will
need to get the configuration of the <tt class="docutils literal"><span class="pre">children</span></tt> and then execute them
using the Composite addon.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;master&quot;</span><span class="p">],</span>
    <span class="s2">&quot;appPort&quot;</span><span class="o">:</span> <span class="s2">&quot;8666&quot;</span><span class="p">,</span>
    <span class="s2">&quot;specs&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;fm&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;MyFrameMojit&quot;</span><span class="p">,</span>
        <span class="s2">&quot;config&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;children&quot;</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;header&quot;</span><span class="o">:</span> <span class="p">{</span>
              <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;HeaderMojit&quot;</span>
            <span class="p">},</span>
            <span class="s2">&quot;body&quot;</span><span class="o">:</span> <span class="p">{</span>
              <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;BodyMojit&quot;</span>
            <span class="p">},</span>
            <span class="s2">&quot;footer&quot;</span><span class="o">:</span> <span class="p">{</span>
              <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;FooterMojit&quot;</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>You can also implement your frame mojit to use a <tt class="docutils literal"><span class="pre">child</span></tt> that has its own children
mojits. Implementing the controller of the frame mojit to use a <tt class="docutils literal"><span class="pre">child</span></tt> with its own
children is more difficult, but the advantage is that the
child of your frame mojit can have binders and direct control over its children
using the <tt class="docutils literal"><span class="pre">Composite</span></tt> addon.</p>
<p>In the case of your frame mojit having a <tt class="docutils literal"><span class="pre">child</span></tt> with its own <tt class="docutils literal"><span class="pre">children</span></tt>,
your <tt class="docutils literal"><span class="pre">application.json</span></tt> might be similar to the following:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;master&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;appPort&quot;</span><span class="o">:</span> <span class="s2">&quot;8666&quot;</span><span class="p">,</span>
    <span class="s2">&quot;specs&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;fm&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;MyFrameMojit&quot;</span><span class="p">,</span>
        <span class="s2">&quot;config&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;title&quot;</span><span class="o">:</span> <span class="s2">&quot;Title of HTML page&quot;</span><span class="p">,</span>
          <span class="s2">&quot;child&quot;</span> <span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span> <span class="o">:</span> <span class="s2">&quot;BodyMojit&quot;</span><span class="p">,</span>
            <span class="s2">&quot;config&quot;</span><span class="o">:</span> <span class="p">{</span>
              <span class="s2">&quot;children&quot;</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">&quot;header&quot;</span><span class="o">:</span> <span class="p">{</span>
                  <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;HeaderMojit&quot;</span>
                <span class="p">},</span>
                <span class="s2">&quot;body&quot;</span><span class="o">:</span> <span class="p">{</span>
                  <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;ContentMojit&quot;</span>
                <span class="p">},</span>
                <span class="s2">&quot;footer&quot;</span><span class="o">:</span> <span class="p">{</span>
                  <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;FooterMojit&quot;</span>
                <span class="p">}</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="frame-mojit-controller">
<span id="create-frame-mojits-controller"></span><h3>Frame Mojit Controller<a class="headerlink" href="#frame-mojit-controller" title="Permalink to this headline">¶</a></h3>
<div class="section" id="requirements">
<span id="frame-mojits-controller-reqs"></span><h4>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h4>
<p>Frame mojits must meet the following requirements:</p>
<ul class="simple">
<li>Be the top-level mojit. Your frame mojit cannot be the child of another mojit instance.</li>
<li>Be on the server. In other words, the frame mojit&#8217;s controller file must have the
<tt class="docutils literal"><span class="pre">server</span></tt> affinity, and the frame mojit <strong>cannot</strong> have binders.</li>
<li>Handle the assets of the children. The implementation is up to the developer, but
one way to do this would be to use the Assets addon to attach the assets of the children
to the page, where <tt class="docutils literal"><span class="pre">meta.assets</span></tt> is from the children:
<tt class="docutils literal"><span class="pre">ac.assets.addAssets(meta.assets);</span></tt></li>
<li>Deploy the children&#8217;s client code to the client using the following:
<tt class="docutils literal"><span class="pre">ac.deploy.constructMojitoClientRuntime(ac.assets,</span> <span class="pre">meta.binders);</span></tt></li>
<li>Execute the children with the Composite addon using either the <tt class="docutils literal"><span class="pre">execute</span></tt> or
<tt class="docutils literal"><span class="pre">composite</span></tt> method.</li>
</ul>
</div>
</div>
<div class="section" id="create-frame-mojits-ex">
<span id="id1"></span><h3>Example<a class="headerlink" href="#create-frame-mojits-ex" title="Permalink to this headline">¶</a></h3>
<p>The following example only provides the application configuration and
the frame mojit code. For the entire application,
see <a class="reference external" href="https://github.com/caridy/Mojito-Apps/tree/master/frame_app">frame_app</a>.</p>
<div class="section" id="application-json">
<h4>application.json<a class="headerlink" href="#application-json" title="Permalink to this headline">¶</a></h4>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;master&quot;</span><span class="p">],</span>
    <span class="s2">&quot;appPort&quot;</span><span class="o">:</span> <span class="s2">&quot;8666&quot;</span><span class="p">,</span>
    <span class="s2">&quot;specs&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;ms&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;IntlHTMLFrameMojit&quot;</span><span class="p">,</span>
        <span class="s2">&quot;config&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;children&quot;</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;header&quot;</span><span class="o">:</span> <span class="p">{</span>
              <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;HeaderMojit&quot;</span>
            <span class="p">},</span>
            <span class="s2">&quot;body&quot;</span><span class="o">:</span> <span class="p">{</span>
              <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;BodyMojit&quot;</span>
            <span class="p">},</span>
            <span class="s2">&quot;footer&quot;</span><span class="o">:</span> <span class="p">{</span>
              <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;FooterMojit&quot;</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="intlhtmlframemojit">
<h4>IntlHTMLFrameMojit<a class="headerlink" href="#intlhtmlframemojit" title="Permalink to this headline">¶</a></h4>
<div class="section" id="controller-server-js">
<h5>controller.server.js<a class="headerlink" href="#controller-server-js" title="Permalink to this headline">¶</a></h5>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">YUI</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;IntlHTMLFrameMojit&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">Y</span><span class="p">,</span> <span class="nx">NAME</span><span class="p">)</span> <span class="p">{</span>
  <span class="s1">&#39;use strict&#39;</span><span class="p">;</span>
  <span class="nx">Y</span><span class="p">.</span><span class="nx">namespace</span><span class="p">(</span><span class="s1">&#39;mojito.controllers&#39;</span><span class="p">)[</span><span class="nx">NAME</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">index</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">ac</span><span class="p">)</span> <span class="p">{</span>

      <span class="c1">// The frame mojit uses the Composite addon to execute the children</span>
      <span class="c1">// instances defined in the &#39;specs&#39; object of application.json.</span>
      <span class="nx">ac</span><span class="p">.</span><span class="nx">composite</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="nx">ac</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">get</span><span class="p">(),</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">meta</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Required: implementation up to developer</span>
        <span class="c1">// Add the assets from the children to the frame mojit before</span>
        <span class="c1">// doing anything else.</span>
        <span class="nx">ac</span><span class="p">.</span><span class="nx">assets</span><span class="p">.</span><span class="nx">addAssets</span><span class="p">(</span><span class="nx">meta</span><span class="p">.</span><span class="nx">assets</span><span class="p">);</span>
        <span class="c1">// Required: must use &#39;constructMojitoClientRuntime&#39;</span>
        <span class="c1">// The frame mojit deploys the client code (YUI) from the</span>
        <span class="c1">// children to the client.</span>
        <span class="nx">ac</span><span class="p">.</span><span class="nx">deploy</span><span class="p">.</span><span class="nx">constructMojitoClientRuntime</span><span class="p">(</span><span class="nx">ac</span><span class="p">.</span><span class="nx">assets</span><span class="p">,</span> <span class="nx">meta</span><span class="p">.</span><span class="nx">binders</span><span class="p">);</span>
        <span class="c1">//  Required: must execute the frame mojit with &#39;ac.done&#39;</span>
        <span class="c1">// 1. Merge the bottom and top fragments from assets into</span>
        <span class="c1">//    the template data, along with title and Mojito version.</span>
        <span class="c1">// 2. Merge the meta object with the children&#39;s meta object.</span>
        <span class="c1">// 3. Add HTTP header information and view name.</span>
        <span class="nx">ac</span><span class="p">.</span><span class="nx">done</span><span class="p">(</span>
          <span class="nx">Y</span><span class="p">.</span><span class="nx">merge</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">ac</span><span class="p">.</span><span class="nx">assets</span><span class="p">.</span><span class="nx">renderLocations</span><span class="p">(),</span> <span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="nx">NAME</span><span class="p">,</span>
            <span class="s2">&quot;page-title&quot;</span><span class="o">:</span> <span class="s2">&quot;some fancy title... from intl&quot;</span><span class="p">,</span>
            <span class="s2">&quot;greeting&quot;</span><span class="o">:</span> <span class="nx">ac</span><span class="p">.</span><span class="nx">intl</span><span class="p">.</span><span class="nx">lang</span><span class="p">(</span><span class="s2">&quot;GREETING&quot;</span><span class="p">),</span>
            <span class="s2">&quot;says&quot;</span><span class="o">:</span> <span class="nx">ac</span><span class="p">.</span><span class="nx">intl</span><span class="p">.</span><span class="nx">lang</span><span class="p">(</span><span class="s2">&quot;SAYS&quot;</span><span class="p">),</span>
            <span class="s2">&quot;preposition&quot;</span><span class="o">:</span> <span class="nx">ac</span><span class="p">.</span><span class="nx">intl</span><span class="p">.</span><span class="nx">lang</span><span class="p">(</span><span class="s2">&quot;PREPOSITION&quot;</span><span class="p">),</span>
            <span class="s2">&quot;today&quot;</span><span class="o">:</span> <span class="nx">ac</span><span class="p">.</span><span class="nx">intl</span><span class="p">.</span><span class="nx">formatDate</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">()),</span>
            <span class="s2">&quot;mojito_version&quot;</span><span class="o">:</span> <span class="nx">Y</span><span class="p">.</span><span class="nx">mojito</span><span class="p">.</span><span class="nx">version</span>
          <span class="p">}),</span>
          <span class="nx">Y</span><span class="p">.</span><span class="nx">merge</span><span class="p">(</span><span class="nx">meta</span><span class="p">,</span> <span class="p">{</span>
            <span class="nx">http</span><span class="o">:</span> <span class="p">{</span>
              <span class="nx">headers</span><span class="o">:</span> <span class="p">{</span>
               <span class="s1">&#39;content-type&#39;</span><span class="o">:</span> <span class="s1">&#39;text/html; charset=&quot;utf-8&quot;&#39;</span>
              <span class="p">}</span>
            <span class="p">},</span>
            <span class="nx">view</span><span class="o">:</span> <span class="p">{</span>
              <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;index&#39;</span>
            <span class="p">}</span>
          <span class="p">})</span>
        <span class="p">);</span>
       <span class="p">});</span>
     <span class="p">}</span>
   <span class="p">};</span>
 <span class="p">},</span> <span class="s1">&#39;0.1.0&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">requires</span><span class="o">:</span> <span class="p">[</span>
    <span class="s1">&#39;mojito&#39;</span><span class="p">,</span>
    <span class="s1">&#39;mojito-assets-addon&#39;</span><span class="p">,</span>
    <span class="s1">&#39;mojito-deploy-addon&#39;</span><span class="p">,</span>
    <span class="s1">&#39;mojito-config-addon&#39;</span><span class="p">,</span>
    <span class="s1">&#39;mojito-composite-addon&#39;</span><span class="p">,</span>
    <span class="s1">&#39;mojito-intl-addon&#39;</span>
<span class="p">]});</span>
</pre></div>
</div>
</div>
<div class="section" id="index-hb-html">
<h5>index.hb.html<a class="headerlink" href="#index-hb-html" title="Permalink to this headline">¶</a></h5>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
  {{#meta}}
    <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">&quot;{{name}}&quot;</span> <span class="na">content=</span><span class="s">&quot;{{content}}&quot;</span><span class="nt">&gt;</span>
  {{/meta}}
  {{^meta}}
    <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">&quot;creator&quot;</span> <span class="na">content=</span><span class="s">&quot;Yahoo! Mojito {{mojito_version}}&quot;</span><span class="nt">&gt;</span>
  {{/meta}}
    <span class="nt">&lt;title&gt;</span>{{page-title}}<span class="nt">&lt;/title&gt;</span>
     {{{top}}}
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;intl_frame&quot;</span> <span class="na">class=</span><span class="s">&quot;header&quot;</span> <span class="na">style=</span><span class="s">&quot;border: dashed black 1px; margin: 10px 10px 10px 10px;&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;h2&gt;</span>{{{name}}} {{{says}} {{{greeting}}} {{{preposition}}} {{{today}}}<span class="nt">&lt;/h2&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;{{mojit_view_id}}&quot;</span> <span class="na">class=</span><span class="s">&quot;mojit&quot;</span> <span class="na">style=</span><span class="s">&quot;border: dashed black 1px;&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;h3&gt;</span>{{title}}<span class="nt">&lt;/h3&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;header&quot;</span> <span class="na">style=</span><span class="s">&quot;border: dashed black 1px; margin: 10px 10px 10px 10px;&quot;</span><span class="nt">&gt;</span>
          {{{header}}}
        <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;body&quot;</span> <span class="na">style=</span><span class="s">&quot;border: dashed black 1px; margin: 10px 10px 10px 10px;&quot;</span><span class="nt">&gt;</span>
          {{{body}}}
        <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;footer&quot;</span> <span class="na">style=</span><span class="s">&quot;border: dashed black 1px; margin: 10px 10px 10px 10px;&quot;</span><span class="nt">&gt;</span>
          {{{footer}}}
        <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
    {{{bottom}}}
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
</div>

   </div>

