

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
     <title>Composite Mojits</title>
    <link rel="stylesheet" href="_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/print.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '',
        COLLAPSE_INDEX: true,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/theme_extras.js"></script>
   </head> 

     <div class="header"><h1 class="heading"><a href="#">
          <span>Mojito</span></a></h1>
      </div>
      <div class="topnav">
        <p>
        <a class="uplink" href="../">Mojito Documentation</a>
        &#160;&#160;::&#160;&#160;
        <a href="../index.html" title="Mojito">Mojito</a>
        &#160;&#160;::&#160;&#160;
        
           <a href="mojito_hb_templates.html">Handlebars in Mojito</a>
        &#160;&#160;::&#160;&#160;
        
        
           <a href="mojito_run_dyn_defined_mojits.html">Running Dynamically Defined Mojit Instances</a>
        
        </p>

      </div>
      <div class="content">
   <div class="section" id="composite-mojits">
<h1>Composite Mojits<a class="headerlink" href="#composite-mojits" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<span id="mojito-composite-intro"></span><h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>A composite mojit is a parent mojit that has child mojits. This parent mojit is
responsible for the execution and layout of its children. The child mojits as
subordinates create content and provide functionality for the parent mojit.
See <a class="reference external" href="../code_exs/multiple_mojits.html">Using Multiple Mojits</a> for a working
example of composite mojits.</p>
</div>
<div class="section" id="creating-parent-and-child-mojit-instances">
<span id="mojito-composite-parent-child"></span><h2>Creating Parent and Child Mojit Instances<a class="headerlink" href="#creating-parent-and-child-mojit-instances" title="Permalink to this headline">¶</a></h2>
<p>As with any mojit, you need to define a mojit instances in <tt class="docutils literal"><span class="pre">application.json</span></tt>.
The parent mojit instance defines its child mojits in the <tt class="docutils literal"><span class="pre">children</span></tt> object.
In the example <tt class="docutils literal"><span class="pre">application.json</span></tt> below, the parent mojit instance is <tt class="docutils literal"><span class="pre">foo</span></tt>,
which has the child mojit instances <tt class="docutils literal"><span class="pre">nav</span></tt>, <tt class="docutils literal"><span class="pre">news</span></tt>, and <tt class="docutils literal"><span class="pre">footer</span></tt>. Each
mojit instance has a <tt class="docutils literal"><span class="pre">type</span></tt> that specifies the mojits that are instantiated.
Because the parent mojit has children, you cannot use an anonymous
mojit instance in <tt class="docutils literal"><span class="pre">routes.json</span></tt> to call an action. For example, in
<tt class="docutils literal"><span class="pre">routes.json</span></tt>, you could have <tt class="docutils literal"><span class="pre">&quot;call&quot;:</span> <span class="pre">&quot;foo.index&quot;</span></tt>, but not
<tt class="docutils literal"><span class="pre">&quot;call&quot;:</span> <span class="pre">&quot;&#64;MyComp.index&quot;</span></tt>.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;master&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;specs&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;foo&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;MyComp&quot;</span><span class="p">,</span>
        <span class="s2">&quot;config&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;children&quot;</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;nav&quot;</span><span class="o">:</span> <span class="p">{</span>
              <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;Nav&quot;</span>
            <span class="p">},</span>
            <span class="s2">&quot;news&quot;</span><span class="o">:</span> <span class="p">{</span>
              <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;News&quot;</span>
            <span class="p">},</span>
            <span class="s2">&quot;footer&quot;</span><span class="o">:</span> <span class="p">{</span>
               <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;Footer&quot;</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="executing-child-mojits">
<span id="mojito-composite-execute-child"></span><h2>Executing Child Mojits<a class="headerlink" href="#executing-child-mojits" title="Permalink to this headline">¶</a></h2>
<p>The parent mojit instance defined in <tt class="docutils literal"><span class="pre">application.json</span></tt> can access the
<tt class="docutils literal"><span class="pre">config</span></tt> object and execute the child mojits from the controller.
The controller methods of the parent mojit can use the <tt class="docutils literal"><span class="pre">Config</span></tt> addon
to get the application configuration with the method <tt class="docutils literal"><span class="pre">getAppConfig</span></tt>.</p>
<p>In the example controller of <tt class="docutils literal"><span class="pre">ParentMojit</span></tt> below, the <tt class="docutils literal"><span class="pre">index</span></tt> function saves
and displays the <tt class="docutils literal"><span class="pre">children</span></tt> object that lists the child mojits.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">YUI</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;ParentMojit&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">Y</span><span class="p">,</span> <span class="nx">NAME</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">Y</span><span class="p">.</span><span class="nx">namespace</span><span class="p">(</span><span class="s1">&#39;mojito.controllers&#39;</span><span class="p">)[</span><span class="nx">NAME</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">index</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ac</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">app_config</span> <span class="o">=</span> <span class="nx">ac</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">getAppConfig</span><span class="p">();</span>
      <span class="c1">// The app config contains the &#39;children&#39; object that is</span>
      <span class="c1">// defined in application.json</span>
      <span class="nx">Y</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">app_config</span><span class="p">);</span>
      <span class="nx">ac</span><span class="p">.</span><span class="nx">done</span><span class="p">(</span><span class="nx">app_config</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="p">...</span>
  <span class="p">};</span>
<span class="p">},</span> <span class="s1">&#39;0.0.1&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">requires</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;mojito&#39;</span><span class="p">,</span> <span class="s1">&#39;mojito-config-addon&#39;</span><span class="p">]});</span>
</pre></div>
</div>
<p>When the controller of the parent mojit calls <tt class="docutils literal"><span class="pre">ac.composite.done</span></tt> from the <tt class="docutils literal"><span class="pre">index</span></tt>
function, the controllers of the mojit children execute <tt class="docutils literal"><span class="pre">ac.done</span></tt> from their
<tt class="docutils literal"><span class="pre">index</span></tt> functions. The rendered views from the child mojits are then available
as Handlebars expressions in the <tt class="docutils literal"><span class="pre">index</span></tt> template of the parent mojit.</p>
<p>For example, in the example controller of the parent mojit below, the <tt class="docutils literal"><span class="pre">index</span></tt>
function calls <tt class="docutils literal"><span class="pre">ac.composite.done</span></tt>, which executes <tt class="docutils literal"><span class="pre">ac.done</span></tt> in the
<tt class="docutils literal"><span class="pre">index</span></tt> functions of the child mojits. The rendered <tt class="docutils literal"><span class="pre">index</span></tt> templates for
each of the child mojits is then available as a Handlebars expression, such
as <tt class="docutils literal"><span class="pre">{{{child_mojit}}}</span></tt> in the parent template.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">YUI</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;ParentMojit&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">Y</span><span class="p">,</span> <span class="nx">NAME</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">Y</span><span class="p">.</span><span class="nx">namespace</span><span class="p">(</span><span class="s1">&#39;mojito.controllers&#39;</span><span class="p">)[</span><span class="nx">NAME</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">index</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ac</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">ac</span><span class="p">.</span><span class="nx">composite</span><span class="p">.</span><span class="nx">done</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">},</span> <span class="s1">&#39;0.1.0&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">requires</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;mojito&#39;</span><span class="p">,</span> <span class="s1">&#39;mojito-composite-addon&#39;</span><span class="p">]});</span>
</pre></div>
</div>
<p>If <tt class="docutils literal"><span class="pre">ParentMojit</span></tt> above is the parent of <tt class="docutils literal"><span class="pre">ChildMojit</span></tt>, the controller of
<tt class="docutils literal"><span class="pre">ChildMojit</span></tt> shown below will execute <tt class="docutils literal"><span class="pre">ac.done</span></tt> in the <tt class="docutils literal"><span class="pre">index</span></tt> function.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">YUI</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;ChildMojit&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">Y</span><span class="p">,</span> <span class="nx">NAME</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">Y</span><span class="p">.</span><span class="nx">namespace</span><span class="p">(</span><span class="s1">&#39;mojito.controllers&#39;</span><span class="p">)[</span><span class="nx">NAME</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">index</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ac</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">ac</span><span class="p">.</span><span class="nx">done</span><span class="p">({</span> <span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;Child Mojit&#39;</span><span class="p">});</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">},</span> <span class="s1">&#39;0.1.0&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">requires</span><span class="o">:</span> <span class="p">[]});</span>
</pre></div>
</div>
</div>
<div class="section" id="passing-data-to-the-parent-template">
<span id="mojito-composite-pass-data-parent"></span><h2>Passing Data to the Parent Template<a class="headerlink" href="#passing-data-to-the-parent-template" title="Permalink to this headline">¶</a></h2>
<p>The parent mojit can pass data to its templates by passing an object as the
first argument to <tt class="docutils literal"><span class="pre">ac.composite.done</span></tt>.</p>
<p>The example parent controller below passes <tt class="docutils literal"><span class="pre">parent_data</span></tt> to its template, so that
the Handlebars expression <tt class="docutils literal"><span class="pre">{{parent_data}}</span></tt> in the parent template can be replaced with
the value <tt class="docutils literal"><span class="pre">'Welcome'</span></tt> when the template is rendered.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">YUI</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;ParentMojit&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">Y</span><span class="p">,</span> <span class="nx">NAME</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">Y</span><span class="p">.</span><span class="nx">namespace</span><span class="p">(</span><span class="s1">&#39;mojito.controllers&#39;</span><span class="p">)[</span><span class="nx">NAME</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">index</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ac</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">ac</span><span class="p">.</span><span class="nx">composite</span><span class="p">.</span><span class="nx">done</span><span class="p">({</span> <span class="nx">parent_data</span><span class="o">:</span> <span class="s1">&#39;Welcome&#39;</span><span class="p">});</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">},</span> <span class="s1">&#39;0.1.0&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">requires</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;mojito&#39;</span><span class="p">,</span> <span class="s1">&#39;mojito-composite-addon&#39;</span><span class="p">]});</span>
</pre></div>
</div>
</div>
<div class="section" id="specifying-the-view-for-a-parent-mojit">
<span id="mojito-composite-specify-view"></span><h2>Specifying the View for a Parent Mojit<a class="headerlink" href="#specifying-the-view-for-a-parent-mojit" title="Permalink to this headline">¶</a></h2>
<p>In addition to passing data to the parent template, you can
specify what parent template to use by passing an object containing the property
<tt class="docutils literal"><span class="pre">view</span></tt> object as a second argument to <tt class="docutils literal"><span class="pre">ac.composite.done</span></tt>.  The <tt class="docutils literal"><span class="pre">name</span></tt> property
specifies the name of the view to render.</p>
<p>The example controller of parent mojit passes data and selects the template
<tt class="docutils literal"><span class="pre">page</span></tt> (e.g., <tt class="docutils literal"><span class="pre">page.hb.html</span></tt>):</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">YUI</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;ParentMojit&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">Y</span><span class="p">,</span> <span class="nx">NAME</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">Y</span><span class="p">.</span><span class="nx">namespace</span><span class="p">(</span><span class="s1">&#39;mojito.controllers&#39;</span><span class="p">)[</span><span class="nx">NAME</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">index</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ac</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">ac</span><span class="p">.</span><span class="nx">composite</span><span class="p">.</span><span class="nx">done</span><span class="p">({</span> <span class="nx">parent_data</span><span class="o">:</span> <span class="s1">&#39;Welcome&#39;</span><span class="p">},</span> <span class="p">{</span> <span class="s2">&quot;view&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;page&quot;</span> <span class="p">}});</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">},</span> <span class="s1">&#39;0.1.0&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">requires</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;mojito&#39;</span><span class="p">,</span> <span class="s1">&#39;mojito-composite-addon&#39;</span><span class="p">]});</span>
</pre></div>
</div>
<p>You can also specify the binder to use with the template. By default, Mojito chooses
the binder with the same name as the template. Using the same example controller from
above, we add the property <tt class="docutils literal"><span class="pre">binder</span></tt> to the <tt class="docutils literal"><span class="pre">view</span></tt> object to specify the <tt class="docutils literal"><span class="pre">bar</span></tt>
binder to use with the <tt class="docutils literal"><span class="pre">page</span></tt> template.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">YUI</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;ParentMojit&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">Y</span><span class="p">,</span> <span class="nx">NAME</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">Y</span><span class="p">.</span><span class="nx">namespace</span><span class="p">(</span><span class="s1">&#39;mojito.controllers&#39;</span><span class="p">)[</span><span class="nx">NAME</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">index</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ac</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">ac</span><span class="p">.</span><span class="nx">composite</span><span class="p">.</span><span class="nx">done</span><span class="p">({</span> <span class="nx">parent_data</span><span class="o">:</span> <span class="s1">&#39;Welcome&#39;</span><span class="p">},</span>
        <span class="p">{</span> <span class="s2">&quot;view&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;page&quot;</span><span class="p">,</span> <span class="s2">&quot;binder&quot;</span><span class="o">:</span> <span class="s2">&quot;bar&quot;</span> <span class="p">}}</span>
      <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">},</span> <span class="s1">&#39;0.1.0&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">requires</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;mojito&#39;</span><span class="p">,</span> <span class="s1">&#39;mojito-composite-addon&#39;</span><span class="p">]});</span>
</pre></div>
</div>
</div>
<div class="section" id="attaching-assets-to-a-parent-template">
<span id="mojito-composite-include-assets"></span><h2>Attaching Assets to a Parent Template<a class="headerlink" href="#attaching-assets-to-a-parent-template" title="Permalink to this headline">¶</a></h2>
<p>If the parent mojit is a child of <tt class="docutils literal"><span class="pre">HTMLFrameMojit</span></tt>, assets can be attached
to the parent template by passing an object containing the <tt class="docutils literal"><span class="pre">assets</span></tt> property.</p>
<p>In this example, the controller of the parent mojit is passing data,
specifying a template, and attaching JavaScript assets to the <tt class="docutils literal"><span class="pre">head</span></tt> element
of the rendered page.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">YUI</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;ParentMojit&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">Y</span><span class="p">,</span> <span class="nx">NAME</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">Y</span><span class="p">.</span><span class="nx">namespace</span><span class="p">(</span><span class="s1">&#39;mojito.controllers&#39;</span><span class="p">)[</span><span class="nx">NAME</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">index</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ac</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">ac</span><span class="p">.</span><span class="nx">composite</span><span class="p">.</span><span class="nx">done</span><span class="p">({</span> <span class="nx">parent_data</span><span class="o">:</span> <span class="s1">&#39;Welcome&#39;</span><span class="p">},</span> <span class="p">{</span>
        <span class="s2">&quot;view&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;page&quot;</span>
        <span class="p">},</span>
        <span class="s2">&quot;assets&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;top&quot;</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;js&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;/static/app_ex/assets/js/something.js&quot;</span><span class="p">]</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">},</span> <span class="s1">&#39;0.1.0&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">requires</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;mojito&#39;</span><span class="p">,</span> <span class="s1">&#39;mojito-composite-addon&#39;</span><span class="p">]});</span>
</pre></div>
</div>
</div>
<div class="section" id="displaying-child-mojits-in-view">
<span id="mojito-composite-child-view"></span><h2>Displaying Child Mojits in View<a class="headerlink" href="#displaying-child-mojits-in-view" title="Permalink to this headline">¶</a></h2>
<p>After the controller of the parent mojit calls <tt class="docutils literal"><span class="pre">ac.composite.done</span></tt>, its
template then has access to the content created by the child mojits. The
template of the parent mojit can use Handlebars expressions to embed the
output from the child mojits. For example, if the child mojit instance
<tt class="docutils literal"><span class="pre">footer</span></tt> was defined in <tt class="docutils literal"><span class="pre">application.json</span></tt>, the template of the parent
mojit could use  <tt class="docutils literal"><span class="pre">{{{footer}}}</span></tt> to embed the content created
by <tt class="docutils literal"><span class="pre">footer</span></tt>.</p>
<p>In the example <tt class="docutils literal"><span class="pre">index</span></tt> template of the parent mojit below, the rendered
<tt class="docutils literal"><span class="pre">index</span></tt> templates of the child mojits  <tt class="docutils literal"><span class="pre">nav</span></tt>,  <tt class="docutils literal"><span class="pre">body</span></tt>, <tt class="docutils literal"><span class="pre">footer</span></tt>
are embedded using Handlebars expressions.</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;{{mojit_view_id}}&quot;</span> <span class="na">class=</span><span class="s">&quot;mojit&quot;</span> <span class="na">style=</span><span class="s">&quot;border: dashed black 1px;&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;h1&gt;</span>{{title}}<span class="nt">&lt;/h1&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;nav&quot;</span> <span class="na">style=</span><span class="s">&quot;border: dashed black 1px; margin: 10px 10px 10px 10px;&quot;</span><span class="nt">&gt;</span>{{{nav}}}<span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;body&quot;</span> <span class="na">style=</span><span class="s">&quot;border: dashed black 1px; margin: 10px 10px 10px 10px;&quot;</span><span class="nt">&gt;</span>{{{body}}}<span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;footer&quot;</span> <span class="na">style=</span><span class="s">&quot;border: dashed black 1px; margin: 10px 10px 10px 10px;&quot;</span><span class="nt">&gt;</span>{{{footer}}}<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="propagating-child-mojit-errors-to-parent-mojits">
<span id="mojito-composite-child-errors"></span><h2>Propagating Child Mojit Errors to Parent Mojits<a class="headerlink" href="#propagating-child-mojit-errors-to-parent-mojits" title="Permalink to this headline">¶</a></h2>
<p>By default, when a child mojit calls the method <a href="#id1"><span class="problematic" id="id2">``</span></a>ac.error`, an error message is
logged (depending on the logging configurations) and an empty string is passed to the
parent. The parent continues to execute its children in parallel, and finally, the
parent template is rendered with the content from the successfully executed
children.</p>
<p>To propagate the error from the child mojit to its parent so that the parent
halts execution of child mojits, you set the property <tt class="docutils literal"><span class="pre">propagateFailure</span></tt> to <tt class="docutils literal"><span class="pre">true</span></tt>
in <tt class="docutils literal"><span class="pre">application.json</span></tt>. The <tt class="docutils literal"><span class="pre">propagateFailure</span></tt> property is part of the
child configuration, not the parent configuration, so you can configure critical
child mojits to propagate errors while making sure that the parent mojit <strong>does not</strong>
fail because a nonessential child mojit calls <tt class="docutils literal"><span class="pre">ac.error</span></tt>.</p>
<p>Based on the example <tt class="docutils literal"><span class="pre">application.json</span></tt> below, when the <tt class="docutils literal"><span class="pre">real_content</span></tt> mojit
instance calls the method <tt class="docutils literal"><span class="pre">ac.error</span></tt>, the error will be propagated to the <tt class="docutils literal"><span class="pre">parent</span></tt>
mojit instance, which will then halt the execution of child mojits.
If the <tt class="docutils literal"><span class="pre">fluff</span></tt> mojit instance calls <tt class="docutils literal"><span class="pre">ac.error</span></tt>, the error
can be logged, but will not be propagated to the <tt class="docutils literal"><span class="pre">parent</span></tt> mojit, so the parent
will resume executing the other child mojits.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;master&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;appPort&quot;</span><span class="o">:</span> <span class="mi">8666</span><span class="p">,</span>
    <span class="s2">&quot;specs&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;parent&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;parentMojit&quot;</span><span class="p">,</span>
        <span class="s2">&quot;config&quot;</span> <span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;children&quot;</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;fluff&quot;</span><span class="o">:</span> <span class="p">{</span>
              <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;fluffMojit&quot;</span><span class="p">,</span>
              <span class="s2">&quot;propagateFailure&quot;</span><span class="o">:</span> <span class="kc">false</span>
            <span class="p">},</span>
            <span class="s2">&quot;real_content&quot;</span><span class="o">:</span> <span class="p">{</span>
              <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;contentMojit&quot;</span><span class="p">,</span>
              <span class="s2">&quot;propagateFailure&quot;</span><span class="o">:</span> <span class="kc">true</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="dynamically-defining-child-mojits">
<span id="mojito-composite-dyn-define"></span><h2>Dynamically Defining Child Mojits<a class="headerlink" href="#dynamically-defining-child-mojits" title="Permalink to this headline">¶</a></h2>
<p>In some cases, the parent mojit won&#8217;t know the children specs until runtime. For
example, the specs of the children might depend on the results of a
Web service call. In such cases, your controller can generate the equivalent
of the <tt class="docutils literal"><span class="pre">config</span></tt> object and a callback, which are then passed to
<tt class="docutils literal"><span class="pre">ac.composite.execute</span></tt>. Using <tt class="docutils literal"><span class="pre">ac.composite.execute</span></tt> lets you run
dynamically defined child mojits. See
<a class="reference external" href="./mojito_run_dyn_defined_mojits.html">Running Dynamically Defined Mojit Instances</a>
for more information.</p>
</div>
</div>

   </div>

