

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
     <title>Logging</title>
    <link rel="stylesheet" href="_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/print.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '',
        COLLAPSE_INDEX: true,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/theme_extras.js"></script>
   </head> 

     <div class="header"><h1 class="heading"><a href="#">
          <span>Mojito</span></a></h1>
      </div>
      <div class="topnav">
        <p>
        <a class="uplink" href="../">Mojito Documentation</a>
        &#160;&#160;::&#160;&#160;
        <a href="../index.html" title="Mojito">Mojito</a>
        &#160;&#160;::&#160;&#160;
        
           <a href="mojito_data.html">Data in Mojito</a>
        &#160;&#160;::&#160;&#160;
        
        
           <a href="mojito_testing.html">Testing</a>
        
        </p>

      </div>
      <div class="content">
   <div class="section" id="logging">
<h1>Logging<a class="headerlink" href="#logging" title="Permalink to this headline">¶</a></h1>
<p>Mojito relies on YUI for logging. When you call <tt class="docutils literal"><span class="pre">Y.log</span></tt> from within your mojits, your
log messages are handled by a YUI instance that Mojito creates based on YUI configurations
defined in <tt class="docutils literal"><span class="pre">application.json</span></tt> or <tt class="docutils literal"><span class="pre">application.yaml</span></tt>. You can set logging levels to
control the degree of detail in your log reports.</p>
<p>Mojito does not write logs to a file. Instead, Mojito writes logs to the Node.js console.
Thus, once logs are passed to Node.js, Mojito has no control over whether Node.js writes
logs to a file, transmits them into an aggregated hub for multiple cores, or uses another
implementation for logging.</p>
<div class="section" id="log-levels">
<span id="mojito-logging-levels"></span><h2>Log Levels<a class="headerlink" href="#log-levels" title="Permalink to this headline">¶</a></h2>
<p>Mojito has the following six log levels:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">debug</span></tt></li>
<li><tt class="docutils literal"><span class="pre">mojito</span></tt></li>
<li><tt class="docutils literal"><span class="pre">info</span></tt></li>
<li><tt class="docutils literal"><span class="pre">warn</span></tt></li>
<li><tt class="docutils literal"><span class="pre">error</span></tt></li>
<li><tt class="docutils literal"><span class="pre">none</span></tt></li>
</ul>
<p>All of them should be familiar except <tt class="docutils literal"><span class="pre">mojito</span></tt>, which is the logging level for
capturing framework-level messages that indicate that an important framework event is
occurring (one that users might want to track).</p>
<p>Setting a log level of <tt class="docutils literal"><span class="pre">warn</span></tt> will filter out all <tt class="docutils literal"><span class="pre">debug</span></tt> and <tt class="docutils literal"><span class="pre">info</span></tt> messages, while
<tt class="docutils literal"><span class="pre">warn</span></tt>, <tt class="docutils literal"><span class="pre">error</span></tt>, and <tt class="docutils literal"><span class="pre">mojito</span></tt> log messages will be processed. To see all
log messages, set the log level to <tt class="docutils literal"><span class="pre">debug</span></tt>.</p>
</div>
<div class="section" id="log-defaults">
<span id="mojito-logging-defaults"></span><h2>Log Defaults<a class="headerlink" href="#log-defaults" title="Permalink to this headline">¶</a></h2>
<p>The server and client log settings have the following default values:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">debug:</span> <span class="pre">true</span></tt> - turns logging on so that messages are displayed in the console.</li>
<li><tt class="docutils literal"><span class="pre">logLevel:</span> <span class="pre">&quot;debug&quot;</span></tt> - log level filter.</li>
<li><tt class="docutils literal"><span class="pre">logLevelOrder:</span> <span class="pre">['debug',</span> <span class="pre">'mojito',</span> <span class="pre">'info',</span> <span class="pre">'warn',</span> <span class="pre">'error',</span> <span class="pre">'none']</span></tt> - the order in
which the log levels are evaluated.</li>
</ul>
</div>
<div class="section" id="log-configuration">
<span id="mojito-logging-config"></span><h2>Log Configuration<a class="headerlink" href="#log-configuration" title="Permalink to this headline">¶</a></h2>
<p>All the values above are configurable through the
<a class="reference external" href="../intro/mojito_configuring.html#yui_config">yui.config object</a> in the
<tt class="docutils literal"><span class="pre">application.json</span></tt> file. In the example <tt class="docutils literal"><span class="pre">application.json</span></tt> below, the <tt class="docutils literal"><span class="pre">yui.config</span></tt>
object overrides the default for <tt class="docutils literal"><span class="pre">logLevel</span></tt>.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;master&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;yui&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;config&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;debug&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="s2">&quot;logLevel&quot;</span><span class="o">:</span> <span class="s2">&quot;error&quot;</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">...</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To set <tt class="docutils literal"><span class="pre">logLevel</span></tt>, the property <tt class="docutils literal"><span class="pre">debug</span></tt> must be set to <tt class="docutils literal"><span class="pre">true</span></tt>, which
is the default.</p>
</div>
<div class="section" id="recommended-logging-configuration-for-production">
<span id="logging-config-prod"></span><h3>Recommended Logging Configuration for Production<a class="headerlink" href="#recommended-logging-configuration-for-production" title="Permalink to this headline">¶</a></h3>
<p>For production, we recommend that you use the <tt class="docutils literal"><span class="pre">environment:production</span></tt>
context with the log configuration shown below:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;environment:production&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;yui&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;config&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;debug&quot;</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="s2">&quot;logLevel&quot;</span><span class="o">:</span> <span class="s2">&quot;none&quot;</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">...</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="customizing-logging">
<span id="mojito-logging-custom"></span><h2>Customizing Logging<a class="headerlink" href="#customizing-logging" title="Permalink to this headline">¶</a></h2>
<div class="section" id="client-and-server-logging">
<span id="logging-custom-rt-context"></span><h3>Client and Server Logging<a class="headerlink" href="#client-and-server-logging" title="Permalink to this headline">¶</a></h3>
<p>You can use the <tt class="docutils literal"><span class="pre">master</span></tt> and  the <tt class="docutils literal"><span class="pre">runtime:client</span></tt> contexts to create different
logging settings for the client and server.</p>
<p>In the <tt class="docutils literal"><span class="pre">application.json</span></tt> file, create two configuration
objects that use the <tt class="docutils literal"><span class="pre">master</span></tt> context for the server-side log configuration
and the <tt class="docutils literal"><span class="pre">runtime:client</span></tt> context for the client-side log configuration
as shown below.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;master&quot;</span> <span class="p">],</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;runtime:client&quot;</span> <span class="p">],</span>
  <span class="p">},</span>

<span class="p">]</span>
</pre></div>
</div>
<p>For each context, configure your logging with
the <tt class="docutils literal"><span class="pre">yui.config</span></tt> object.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;master&quot;</span> <span class="p">],</span>
    <span class="p">...</span>
    <span class="s2">&quot;yui&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;config&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;debug&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="s2">&quot;logLevel&quot;</span><span class="o">:</span> <span class="s2">&quot;info&quot;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;runtime:client&quot;</span> <span class="p">],</span>
    <span class="p">...</span>
    <span class="s2">&quot;yui&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;config&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;debug&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="s2">&quot;logLevel&quot;</span><span class="o">:</span> <span class="s2">&quot;warn&quot;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="using-y-log-in-mojito-applications">
<span id="logging-custom-using-ylog"></span><h3>Using Y.log in Mojito Applications<a class="headerlink" href="#using-y-log-in-mojito-applications" title="Permalink to this headline">¶</a></h3>
<p>You use <tt class="docutils literal"><span class="pre">Y.log</span></tt> in Mojito as you would in any application
using YUI. See the YUI API documentation for
<a class="reference external" href="http://yuilibrary.com/yui/docs/api/classes/YUI.html#method_log">log</a> for
details about the parameters and return values.</p>
<p>We recommend that you pass the first three parameters to
<tt class="docutils literal"><span class="pre">Y.log</span></tt> in your Mojito application:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">msg</span></tt> - the message to log</li>
<li><tt class="docutils literal"><span class="pre">cat</span></tt> - the log level or category, such as &#8216;info&#8217;, &#8216;error&#8217;, &#8216;warn&#8217;</li>
<li><tt class="docutils literal"><span class="pre">src</span></tt> - the name of the module reporting the error</li>
</ul>
<p>In the example binder below, <tt class="docutils literal"><span class="pre">Y.log</span></tt> logs
a message at the <tt class="docutils literal"><span class="pre">info</span></tt> level and specifies the module
through <tt class="docutils literal"><span class="pre">NAME</span></tt>, which in this case contains the value <tt class="docutils literal"><span class="pre">DemoBinderIndex</span></tt>.</p>
<div class="highlight-javascript"><div class="highlight"><pre> <span class="nx">YUI</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;DemoBinderIndex&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">Y</span><span class="p">,</span> <span class="nx">NAME</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">Y</span><span class="p">.</span><span class="nx">namespace</span><span class="p">(</span><span class="s1">&#39;mojito.binders&#39;</span><span class="p">)[</span><span class="nx">NAME</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">init</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">mojitProxy</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">this</span><span class="p">.</span><span class="nx">mojitProxy</span> <span class="o">=</span> <span class="nx">mojitProxy</span><span class="p">;</span>
      <span class="p">},</span>
      <span class="nx">bind</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">Y</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Log message&quot;</span><span class="p">,</span> <span class="s2">&quot;info&quot;</span><span class="p">,</span> <span class="nx">NAME</span><span class="p">);</span>
          <span class="k">this</span><span class="p">.</span><span class="nx">node</span> <span class="o">=</span> <span class="nx">node</span><span class="p">;</span>
      <span class="p">}</span>
  <span class="p">};</span>
<span class="p">},</span> <span class="s1">&#39;0.0.1&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">requires</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;mojito-client&#39;</span><span class="p">]});</span>
</pre></div>
</div>
</div>
<div class="section" id="customizing-the-log-level-order">
<h3>Customizing the Log Level Order<a class="headerlink" href="#customizing-the-log-level-order" title="Permalink to this headline">¶</a></h3>
<p>You can reorder and create log levels with the <tt class="docutils literal"><span class="pre">logLevelOrder</span></tt> property of the
<tt class="docutils literal"><span class="pre">yui.config</span></tt> object. In the example <tt class="docutils literal"><span class="pre">yui.config</span></tt> object below,
the order of the log levels is switched for <tt class="docutils literal"><span class="pre">warn</span></tt> and <tt class="docutils literal"><span class="pre">info</span></tt> and
the new log level <tt class="docutils literal"><span class="pre">danger</span></tt> is created.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;master&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;yui&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;config&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;debug&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="s2">&quot;logLevelOrder&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;debug&quot;</span><span class="p">,</span> <span class="s2">&quot;warn&quot;</span><span class="p">,</span> <span class="s2">&quot;info&quot;</span><span class="p">,</span> <span class="s2">&quot;error&quot;</span><span class="p">,</span> <span class="s2">&quot;danger&quot;</span><span class="p">,</span> <span class="s2">&quot;none&quot;</span> <span class="p">]</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">...</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="including-and-excluding-modules-from-logging">
<span id="logging-custom-include-exclude-src"></span><h3>Including and Excluding Modules From Logging<a class="headerlink" href="#including-and-excluding-modules-from-logging" title="Permalink to this headline">¶</a></h3>
<p>You can use the <tt class="docutils literal"><span class="pre">logExclude</span></tt> and <tt class="docutils literal"><span class="pre">logInclude</span></tt> properties
of the <tt class="docutils literal"><span class="pre">yui.config</span></tt> object to include or exclude logging
from YUI modules of your application.</p>
<p>The configuration below excludes logging from the YUI module
<tt class="docutils literal"><span class="pre">FinanceModelStocks</span></tt>:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="s2">&quot;yui&quot;</span><span class="o">:</span> <span class="p">{</span>
  <span class="s2">&quot;config&quot;</span><span class="o">:</span> <span class="p">{</span>
   <span class="s2">&quot;debug&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
   <span class="s2">&quot;logLevel&quot;</span><span class="o">:</span> <span class="s2">&quot;info&quot;</span><span class="p">,</span>
   <span class="s2">&quot;logExclude&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;FinanceModelStocks&quot;</span><span class="o">:</span> <span class="kc">true</span> <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Based on the logging configurations above, the
<tt class="docutils literal"><span class="pre">Y.log</span></tt> messages in the model below will be excluded
from the log:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">YUI</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;FinanceModelStocks&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">Y</span><span class="p">,</span> <span class="nx">NAME</span><span class="p">)</span> <span class="p">{</span>

  <span class="nx">Y</span><span class="p">.</span><span class="nx">namespace</span><span class="p">(</span><span class="s1">&#39;mojito.models&#39;</span><span class="p">)[</span><span class="nx">NAME</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>

    <span class="nx">init</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">config</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// The following log message will be excluded from the log</span>
      <span class="c1">// because &quot;logExclude&quot;: { &quot;FinanceModelStocks&quot; }.</span>
      <span class="c1">// NAME =&gt; &quot;FinanceModelStocks&quot;</span>
      <span class="nx">Y</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;this message will be excluded&#39;</span><span class="p">,</span> <span class="s1">&#39;info&#39;</span><span class="p">,</span> <span class="nx">NAME</span><span class="p">);</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">config</span> <span class="o">=</span> <span class="nx">config</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="p">...</span>
  <span class="p">};</span>

<span class="p">},</span> <span class="s1">&#39;0.0.1&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">requires</span><span class="o">:</span> <span class="p">[]});</span>
</pre></div>
</div>
</div>
</div>
</div>

   </div>

